{"version":3,"sources":["webpack:///js/9.build.js","webpack:///configPermissionMgmt.vue","webpack:///./src/component/permissionMgmtConfig/configPermissionMgmt.vue?d9a0","webpack:///./src/component/permissionMgmtConfig/configPermissionMgmt.vue?acf4","webpack:///./src/component/permissionMgmtConfig/configPermissionMgmt.vue?d456","webpack:///./src/component/permissionMgmtConfig/configPermissionMgmt.vue"],"names":["webpackJsonp","110","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","initData","data","treeView","config","userID","userName","userUserName","userBranchName","searchBox","searchVal","placeholder","suggest","isShow","isShowIcon","showChoice","keyConfig","name","id","childKey","locationConfig","key","modalBox","content","btn","text","handel","activated","self","this","Bestone","ui","pageInit","setTitle","reviewCallBack","util","query","UserID","UserName","UserUserName","UserBranchName","ajax","url","JSON","stringify","Keyword","success","ajaxData","getTreeViewDataForSearch","ddSetRight","control","show","onSuccess","submitConfig","deactivated","resetData","methods","roleIds","$","each","k","v","frontActive","Id","length","message","confirmClickDeal","substring","UserId","RoleIds","OperId","user","OperName","notOper","setTimeout","window","app","$router","go","cancelClickDeal","searchClickDeal","str","searchValChangeDeal","itemClickDeal","item","val","$loca","css","scrollTop","offset","top","dataArrChangeDeal","arr","123","exports","undefined","push","i","156","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","selectChoiceId","on","searchClick","searchValChange","itemClick","_e","dataArr","setConfig","dataArrChange","confirmClick","cancelClick","staticRenderFns","187","locals","79","injectStyle","ssrContext","Component"],"mappings":"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","file":"js/9.build.js?651eaa72","sourcesContent":["webpackJsonp([9],{\n\n/***/ 110:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar initData = function initData() {\n    return {\n        data: {\n            treeView: []\n        },\n        config: {\n            userID: 0,\n            userName: '',\n            userUserName: '',\n            userBranchName: '',\n            searchBox: {\n                searchVal: '',\n                placeholder: '搜索部门权限',\n                suggest: {\n                    isShow: 1,\n                    data: []\n                }\n            },\n            treeView: {\n                isShow: 1,\n                isShowIcon: 2,\n                showChoice: true,\n                keyConfig: {\n                    name: 'RoleName',\n                    id: 'Id',\n                    childKey: 'ChildList'\n                },\n                locationConfig: {\n                    key: 'id'\n                }\n            },\n            modalBox: {\n                isShow: false,\n                content: '',\n                btn: [{\n                    text: '确定',\n                    handel: 'confirmClick'\n                }, {\n                    text: '取消',\n                    handel: 'cancelClick'\n                }]\n            }\n        }\n    };\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return new initData();\n    },\n\n    activated: function activated() {\n        var self = this;\n        Bestone.ui.pageInit({\n            setTitle: '配置权限管理',\n            reviewCallBack: function reviewCallBack() {\n                self.config.userID = Bestone.util.query().UserID || 0;\n                self.config.userName = Bestone.util.query().UserName || '';\n                self.config.userUserName = Bestone.util.query().UserUserName || '';\n                self.config.userBranchName = Bestone.util.query().UserBranchName || '';\n\n                // 按关键字获取权限管理部门\n                Bestone.util.ajax({\n                    url: 'api/AuthManage/GetRolesByKeyword',\n                    data: JSON.stringify({\n                        Keyword: ''\n                    }),\n                    success: function success(ajaxData) {\n                        self.config.searchBox.suggest.data = Bestone.util.getTreeViewDataForSearch({\n                            data: ajaxData.data || [],\n                            name: 'RoleName',\n                            id: 'Id',\n                            childKey: 'ChildList'\n                        });\n                        self.data.treeView = ajaxData.data || [];\n                    }\n                });\n            }\n        });\n\n        Bestone.ui.ddSetRight({\n            control: true,\n            text: '提交',\n            show: true,\n            onSuccess: function onSuccess() {\n                self.submitConfig();\n            }\n        });\n    },\n    deactivated: function deactivated() {\n        var self = this;\n        // 回退时清除数据\n        Bestone.util.resetData(function () {\n            self.data = initData().data;\n            self.config = initData().config;\n        });\n    },\n    methods: {\n        // 提交配置\n        submitConfig: function submitConfig() {\n            var self = this;\n\n            // 选中的权限部门列表\n            var roleIds = '';\n            $.each(self.data.treeView, function (k, v) {\n                if (!!v.frontActive && v.frontActive === 1) {\n                    roleIds = roleIds + v.Id + ',';\n                }\n            });\n            if (roleIds.length <= 0) {\n                Bestone.ui.message({\n                    content: '请至少选择一个部门'\n                });\n                return;\n            }\n\n            self.config.modalBox.content = '<p style=\"font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;\">确定提交？</p>';\n            self.config.modalBox.isShow = true;\n        },\n        // 弹出框确认\n        confirmClickDeal: function confirmClickDeal() {\n            var self = this;\n\n            // 选中的权限部门列表\n            var roleIds = '';\n            $.each(self.data.treeView, function (k, v) {\n                if (!!v.frontActive && v.frontActive === 1) {\n                    roleIds = roleIds + v.Id + ',';\n                }\n            });\n            if (roleIds.length <= 0) {\n                Bestone.ui.message({\n                    content: '请至少选择一个部门'\n                });\n                return;\n            }\n            roleIds = roleIds.substring(0, roleIds.length - 1); // 去掉最后一个逗号\n\n            Bestone.util.ajax({\n                url: 'api/AuthManage/AddRoleManange',\n                data: JSON.stringify({\n                    UserId: self.config.userID,\n                    RoleIds: roleIds,\n                    OperId: Bestone.user.id,\n                    OperName: Bestone.user.name\n                }),\n                success: function success(ajaxData) {\n                    Bestone.ui.message({\n                        content: '权限管理配置成功',\n                        notOper: true\n                    });\n                    self.config.modalBox.isShow = false;\n                    setTimeout(function () {\n                        window.app.$router.go(-1);\n                    }, 500);\n                }\n            });\n        },\n        // 弹出框取消\n        cancelClickDeal: function cancelClickDeal() {\n            var self = this;\n            self.config.modalBox.isShow = false;\n        },\n        // 搜索点击\n        searchClickDeal: function searchClickDeal(str) {\n            Bestone.ui.message({\n                content: '仅支持智能匹配搜索'\n            });\n        },\n        // 输入框值改变\n        searchValChangeDeal: function searchValChangeDeal(str) {\n            this.config.searchBox.searchVal = str; // 必须，用于父子组件数据双向绑定\n        },\n        // 搜索下拉框点击\n        itemClickDeal: function itemClickDeal(item) {\n            var val = item.id;\n            if (!!val) {\n                var $loca = $('.ui.tree-view .loca' + val);\n                $('.ui.tree-view .item').css('background-color', 'transparent');\n                if ($loca.length > 0) {\n                    setTimeout(function () {\n                        $loca.css('background-color', '#FFFBE6');\n                        $(window).scrollTop($loca.offset().top - 5);\n                    }, 100);\n                }\n            }\n        },\n        // 树形列表数据双向绑定\n        dataArrChangeDeal: function dataArrChangeDeal(arr) {\n            var self = this;\n            self.data.treeView = arr;\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 123:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#permission-mgmt[data-v-1b4051d9]{padding-top:10px;padding-bottom:10px}#permission-mgmt>.search-content[data-v-1b4051d9]{border-top:1px solid #eee;background-color:#fff;padding:10px 15px}#permission-mgmt>.ui-title[data-v-1b4051d9]{margin-top:10px}#permission-mgmt>.tree-view-content[data-v-1b4051d9]{border-bottom:1px solid #eee}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 156:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"permission-mgmt\"\n    }\n  }, [_c('div', {\n    staticClass: \"ui ui-text-list\"\n  }, [_c('p', [_vm._v(\"TDS账号：\" + _vm._s(_vm.config.userName))]), _vm._v(\" \"), _c('p', [_vm._v(\"姓名：\" + _vm._s(_vm.config.userUserName))]), _vm._v(\" \"), _c('p', [_vm._v(\"账号所属公司：\" + _vm._s(_vm.config.userBranchName))])]), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"search-content\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder,\n      \"suggest\": _vm.config.searchBox.suggest\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal,\n      \"itemClick\": _vm.itemClickDeal\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui ui-title\"\n  }, [_vm._v(\"配置权限管理部门\")]), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"tree-view-content\"\n  }, [_c('tree-view', {\n    attrs: {\n      \"dataArr\": _vm.data.treeView,\n      \"setConfig\": _vm.config.treeView\n    },\n    on: {\n      \"dataArrChange\": _vm.dataArrChangeDeal\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (false) ? _c('div', {\n    staticClass: \"ui ui-bottom-btn\"\n  }, [_c('v-touch', {\n    staticClass: \"btn\",\n    attrs: {\n      \"tag\": \"div\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.submitConfig($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.submitConfig($event)\n      }\n    }\n  }, [_vm._v(\"提交配置\")])], 1) : _vm._e(), _vm._v(\" \"), _c('modal-box', {\n    attrs: {\n      \"setConfig\": _vm.config.modalBox\n    },\n    on: {\n      \"confirmClick\": _vm.confirmClickDeal,\n      \"cancelClick\": _vm.cancelClickDeal\n    }\n  })], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 187:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(123);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"6baf2f09\", content, true);\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(187)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(110),\n  /* template */\n  __webpack_require__(156),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-1b4051d9\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/9.build.js?651eaa72","<!-- 权限管理配置-新增权限管理配置-配置权限管理 -->\r\n<template>\r\n    <div>\r\n    <div id=\"permission-mgmt\">\r\n        <div class=\"ui ui-text-list\">\r\n            <p>TDS账号：{{config.userName}}</p>\r\n            <p>姓名：{{config.userUserName}}</p>\r\n            <p>账号所属公司：{{config.userBranchName}}</p>\r\n        </div>\r\n        <div class=\"search-content\" v-if=\"config.selectChoiceId !== ''\">\r\n            <search-box :searchVal=\"config.searchBox.searchVal\" :placeholder=\"config.searchBox.placeholder\" :suggest=\"config.searchBox.suggest\" @searchClick=\"searchClickDeal\" @searchValChange=\"searchValChangeDeal\" @itemClick=\"itemClickDeal\"></search-box>\r\n        </div>\r\n        <div class=\"ui ui-title\">配置权限管理部门</div>\r\n        <div class=\"tree-view-content\" v-if=\"config.selectChoiceId !== ''\">\r\n            <tree-view :dataArr=\"data.treeView\" :setConfig=\"config.treeView\" @dataArrChange=\"dataArrChangeDeal\"></tree-view>\r\n        </div>\r\n        <div class=\"ui ui-bottom-btn\" v-if=\"false\">\r\n            <v-touch tag=\"div\" class=\"btn\" @pressup.prevent=\"submitConfig\" @tap.prevent=\"submitConfig\">提交配置</v-touch>\r\n        </div>\r\n        <!-- 对话框 -->\r\n        <modal-box :setConfig=\"config.modalBox\" @confirmClick=\"confirmClickDeal\" @cancelClick=\"cancelClickDeal\"></modal-box>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script scoped>\r\n    var initData = function () {\r\n        return {\r\n            data: {\r\n                treeView: []\r\n            },\r\n            config: {\r\n                userID: 0,\r\n                userName: '',\r\n                userUserName: '',\r\n                userBranchName: '',\r\n                searchBox: {\r\n                    searchVal: '',\r\n                    placeholder: '搜索部门权限',\r\n                    suggest: {\r\n                        isShow: 1,\r\n                        data: [],\r\n                    }\r\n                },\r\n                treeView: {\r\n                    isShow: 1,\r\n                    isShowIcon: 2,\r\n                    showChoice: true,\r\n                    keyConfig: {\r\n                        name: 'RoleName',\r\n                        id: 'Id',\r\n                        childKey: 'ChildList'\r\n                    },\r\n                    locationConfig: {\r\n                        key: 'id'\r\n                    }\r\n                },\r\n                modalBox: {\r\n                    isShow: false,\r\n                    content: '',\r\n                    btn: [{\r\n                        text: '确定',\r\n                        handel: 'confirmClick'\r\n                    }, {\r\n                        text: '取消',\r\n                        handel: 'cancelClick'\r\n                    }]\r\n                }\r\n            }\r\n        }\r\n    };\r\n    export default {\r\n        data() {\r\n            return new initData()\r\n        },\r\n        activated: function () {\r\n            let self = this;\r\n            Bestone.ui.pageInit({\r\n                setTitle: '配置权限管理',\r\n                reviewCallBack: function () {\r\n                    self.config.userID = Bestone.util.query().UserID || 0;\r\n                    self.config.userName = Bestone.util.query().UserName || '';\r\n                    self.config.userUserName = Bestone.util.query().UserUserName || '';\r\n                    self.config.userBranchName = Bestone.util.query().UserBranchName || '';\r\n\r\n                    // 按关键字获取权限管理部门\r\n                    Bestone.util.ajax({\r\n                        url: 'api/AuthManage/GetRolesByKeyword',\r\n                        data: JSON.stringify({\r\n                            Keyword: ''\r\n                        }),\r\n                        success: function (ajaxData) {\r\n                            self.config.searchBox.suggest.data = Bestone.util.getTreeViewDataForSearch({\r\n                                data: ajaxData.data || [],\r\n                                name: 'RoleName',\r\n                                id: 'Id',\r\n                                childKey: 'ChildList'\r\n                            });\r\n                            self.data.treeView = ajaxData.data || [];\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            Bestone.ui.ddSetRight({\r\n                control: true,\r\n                text: '提交',\r\n                show: true,\r\n                onSuccess: function () {\r\n                    self.submitConfig();\r\n                }\r\n            });\r\n        },\r\n        deactivated: function () {\r\n            var self = this;\r\n            // 回退时清除数据\r\n            Bestone.util.resetData(function () {\r\n                self.data = initData().data;\r\n                self.config = initData().config;\r\n            });\r\n        },\r\n        methods: {\r\n            // 提交配置\r\n            submitConfig: function () {\r\n                let self = this;\r\n\r\n                // 选中的权限部门列表\r\n                var roleIds = '';\r\n                $.each(self.data.treeView, function (k, v) {\r\n                    if(!!v.frontActive && v.frontActive===1) {\r\n                        roleIds = roleIds + v.Id + ',';\r\n                    }\r\n                });\r\n                if (roleIds.length <= 0) {\r\n                    Bestone.ui.message({\r\n                        content: '请至少选择一个部门'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                self.config.modalBox.content = '<p style=\"font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;\">确定提交？</p>';\r\n                self.config.modalBox.isShow = true;\r\n            },\r\n            // 弹出框确认\r\n            confirmClickDeal: function () {\r\n                let self = this;\r\n\r\n                // 选中的权限部门列表\r\n                var roleIds = '';\r\n                $.each(self.data.treeView, function (k, v) {\r\n                    if(!!v.frontActive && v.frontActive===1) {\r\n                        roleIds = roleIds + v.Id + ',';\r\n                    }\r\n                });\r\n                if (roleIds.length <= 0) {\r\n                    Bestone.ui.message({\r\n                        content: '请至少选择一个部门'\r\n                    });\r\n                    return;\r\n                }\r\n                roleIds = roleIds.substring(0,roleIds.length-1); // 去掉最后一个逗号\r\n\r\n                Bestone.util.ajax({\r\n                    url: 'api/AuthManage/AddRoleManange',\r\n                    data: JSON.stringify({\r\n                        UserId: self.config.userID,\r\n                        RoleIds: roleIds,\r\n                        OperId: Bestone.user.id,\r\n                        OperName: Bestone.user.name\r\n                    }),\r\n                    success: function (ajaxData) {\r\n                        Bestone.ui.message({\r\n                            content: '权限管理配置成功',\r\n                            notOper: true\r\n                        });\r\n                        self.config.modalBox.isShow = false;\r\n                        setTimeout(function () {\r\n                            window.app.$router.go(-1);\r\n                        }, 500);\r\n                    }\r\n                });\r\n            },\r\n            // 弹出框取消\r\n            cancelClickDeal: function () {\r\n                let self = this;\r\n                self.config.modalBox.isShow = false;\r\n            },\r\n            // 搜索点击\r\n            searchClickDeal: function (str) {\r\n                Bestone.ui.message({\r\n                    content: '仅支持智能匹配搜索'\r\n                });\r\n            },\r\n            // 输入框值改变\r\n            searchValChangeDeal: function (str) {\r\n                this.config.searchBox.searchVal = str; // 必须，用于父子组件数据双向绑定\r\n            },\r\n            // 搜索下拉框点击\r\n            itemClickDeal: function (item) {\r\n                let val = item.id;\r\n                if (!!val) {\r\n                    let $loca = $('.ui.tree-view .loca' + val);\r\n                    $('.ui.tree-view .item').css('background-color', 'transparent');\r\n                    if ($loca.length > 0) {\r\n                        setTimeout(function () {\r\n                            $loca.css('background-color', '#FFFBE6');\r\n                            $(window).scrollTop($loca.offset().top - 5);\r\n                        }, 100);\r\n                    }\r\n                }\r\n            },\r\n            // 树形列表数据双向绑定\r\n            dataArrChangeDeal: function (arr) {\r\n                let self = this;\r\n                self.data.treeView = arr;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    #permission-mgmt {\r\n        padding-top: 10px;\r\n        padding-bottom: 10px;\r\n        & > .search-content {\r\n            border-top: solid 1px #eee;\r\n            background-color: #fff;\r\n            padding: 10px 15px;\r\n        }\r\n        &>.ui-title {\r\n            margin-top: 10px;\r\n        }\r\n        & > .tree-view-content {\r\n            border-bottom: solid 1px #eee;\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// configPermissionMgmt.vue?18a0e4bc","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#permission-mgmt[data-v-1b4051d9]{padding-top:10px;padding-bottom:10px}#permission-mgmt>.search-content[data-v-1b4051d9]{border-top:1px solid #eee;background-color:#fff;padding:10px 15px}#permission-mgmt>.ui-title[data-v-1b4051d9]{margin-top:10px}#permission-mgmt>.tree-view-content[data-v-1b4051d9]{border-bottom:1px solid #eee}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1b4051d9\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/permissionMgmtConfig/configPermissionMgmt.vue\n// module id = 123\n// module chunks = 9","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"permission-mgmt\"\n    }\n  }, [_c('div', {\n    staticClass: \"ui ui-text-list\"\n  }, [_c('p', [_vm._v(\"TDS账号：\" + _vm._s(_vm.config.userName))]), _vm._v(\" \"), _c('p', [_vm._v(\"姓名：\" + _vm._s(_vm.config.userUserName))]), _vm._v(\" \"), _c('p', [_vm._v(\"账号所属公司：\" + _vm._s(_vm.config.userBranchName))])]), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"search-content\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder,\n      \"suggest\": _vm.config.searchBox.suggest\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal,\n      \"itemClick\": _vm.itemClickDeal\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui ui-title\"\n  }, [_vm._v(\"配置权限管理部门\")]), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"tree-view-content\"\n  }, [_c('tree-view', {\n    attrs: {\n      \"dataArr\": _vm.data.treeView,\n      \"setConfig\": _vm.config.treeView\n    },\n    on: {\n      \"dataArrChange\": _vm.dataArrChangeDeal\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (false) ? _c('div', {\n    staticClass: \"ui ui-bottom-btn\"\n  }, [_c('v-touch', {\n    staticClass: \"btn\",\n    attrs: {\n      \"tag\": \"div\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.submitConfig($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.submitConfig($event)\n      }\n    }\n  }, [_vm._v(\"提交配置\")])], 1) : _vm._e(), _vm._v(\" \"), _c('modal-box', {\n    attrs: {\n      \"setConfig\": _vm.config.modalBox\n    },\n    on: {\n      \"confirmClick\": _vm.confirmClickDeal,\n      \"cancelClick\": _vm.cancelClickDeal\n    }\n  })], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-1b4051d9\",\"hasScoped\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/component/permissionMgmtConfig/configPermissionMgmt.vue\n// module id = 156\n// module chunks = 9","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b4051d9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./configPermissionMgmt.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"6baf2f09\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1b4051d9\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/permissionMgmtConfig/configPermissionMgmt.vue\n// module id = 187\n// module chunks = 9","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b4051d9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./configPermissionMgmt.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./configPermissionMgmt.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1b4051d9\\\",\\\"hasScoped\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./configPermissionMgmt.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-1b4051d9\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/permissionMgmtConfig/configPermissionMgmt.vue\n// module id = 79\n// module chunks = 9"],"sourceRoot":""}