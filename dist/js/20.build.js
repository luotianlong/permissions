webpackJsonp([20],{123:function(e,t,s){t=e.exports=s(0)(void 0),t.push([e.i,"#my-log[data-v-10f4b248]{padding-top:10px}#my-log>.search[data-v-10f4b248]{background-color:#fff;padding:10px 15px}#my-log>.list[data-v-10f4b248]{padding:10px 10px 0}#my-log>.list>ul>li[data-v-10f4b248]{min-height:45px;padding:5px 10px;background-color:#fff;border-radius:5px;font-size:12px;color:#404040;margin-bottom:10px}#my-log>.list>ul>li>.time[data-v-10f4b248]{line-height:20px;min-height:20px}#my-log>.list>ul>li>.content[data-v-10f4b248]{line-height:20px;min-height:20px;margin-top:5px;overflow:hidden}#my-log>.list>ul>li>.content>.name[data-v-10f4b248]{float:left;width:50px;padding-right:10px;height:20px;line-height:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#my-log>.list>ul>li>.content>.text[data-v-10f4b248]{overflow:hidden}#my-log>.list>ul>li>.content>.text>a[data-v-10f4b248]{color:#06c;display:inline-block;height:20px}#my-log>.list>ul>li>.content>.text>a[data-v-10f4b248]:active{background-color:#eee}#my-log>.list>ul>li>.content>.text>span[data-v-10f4b248]{color:#06c}#my-log>.list>ul>li[data-v-10f4b248]:last-child{margin-bottom:0}#my-log>.list>.no-data[data-v-10f4b248]{color:#999;font-size:12px;line-height:20px;text-align:center;margin-top:40px}",""])},156:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"my-log"}},[s("div",{staticClass:"search"},[s("search-box",{attrs:{searchVal:e.config.searchBox.searchVal,placeholder:e.config.searchBox.placeholder},on:{searchClick:e.searchClickDeal,searchValChange:e.searchValChangeDeal}})],1),e._v(" "),s("div",{staticClass:"list"},[e.data.list&&e.data.list.length>0?s("ul",e._l(e.data.list,function(t,a){return s("li",[s("div",{staticClass:"time"},[e._v(e._s(t.CreateDate))]),e._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"name"},[e._v(e._s(e.config.isSelf&&1==t.BusinessType?"我":t.UserName))]),e._v(" "),1==t.BusinessType?s("p",{staticClass:"text"},[e._v("申请权限"),s("v-touch",{attrs:{tag:"a"},on:{pressup:function(s){s.preventDefault(),e.viewDetail(t,a)},tap:function(s){s.preventDefault(),e.viewDetail(t,a)}}},[e._v("（"+e._s(t.BusinessCode)+"）")])],1):e._e(),e._v(" "),2==t.BusinessType?s("p",{staticClass:"text"},[e._v("1级审核通过 "+e._s(e.config.isSelf?"我":t.ApplyUserName)+" 的权限申请"),s("v-touch",{attrs:{tag:"a"},on:{pressup:function(s){s.preventDefault(),e.viewDetail(t,a)},tap:function(s){s.preventDefault(),e.viewDetail(t,a)}}},[e._v("（"+e._s(t.BusinessCode)+"）")])],1):e._e(),e._v(" "),3==t.BusinessType?s("p",{staticClass:"text"},[e._v("1级审核驳回 "+e._s(e.config.isSelf?"我":t.ApplyUserName)+" 的权限申请"),s("v-touch",{attrs:{tag:"a"},on:{pressup:function(s){s.preventDefault(),e.viewDetail(t,a)},tap:function(s){s.preventDefault(),e.viewDetail(t,a)}}},[e._v("（"+e._s(t.BusinessCode)+"）")])],1):e._e(),e._v(" "),4==t.BusinessType?s("p",{staticClass:"text"},[e._v("2级审核通过 "+e._s(e.config.isSelf?"我":t.ApplyUserName)+" 的权限申请"),s("v-touch",{attrs:{tag:"a"},on:{pressup:function(s){s.preventDefault(),e.viewDetail(t,a)},tap:function(s){s.preventDefault(),e.viewDetail(t,a)}}},[e._v("（"+e._s(t.BusinessCode)+"）")]),s("br"),s("span",[e._v("系统开通了申请的权限。")])],1):e._e(),e._v(" "),5==t.BusinessType?s("p",{staticClass:"text"},[e._v("2级审核驳回 "+e._s(e.config.isSelf?"我":t.ApplyUserName)+" 的权限申请"),s("v-touch",{attrs:{tag:"a"},on:{pressup:function(s){s.preventDefault(),e.viewDetail(t,a)},tap:function(s){s.preventDefault(),e.viewDetail(t,a)}}},[e._v("（"+e._s(t.BusinessCode)+"）")])],1):e._e(),e._v(" "),6==t.BusinessType?s("p",{staticClass:"text"},[e._v("新增 "+e._s(t.ApplyUserName)+" "+e._s(t.BranchName)+" "+e._s(t.RoleName)+" 权限管理"+e._s(t.CheckLevel)+"级审核。")]):e._e(),e._v(" "),7==t.BusinessType?s("p",{staticClass:"text"},[e._v("移除 "+e._s(t.ApplyUserName)+" "+e._s(t.BranchName)+" "+e._s(t.RoleName)+" 权限管理"+e._s(t.CheckLevel)+"级审核。")]):e._e(),e._v(" "),8==t.BusinessType?s("p",{staticClass:"text"},[e._v("新增 "+e._s(t.ApplyUserName)+" "+e._s(t.RoleName)+" 权限管理功能。")]):e._e(),e._v(" "),9==t.BusinessType?s("p",{staticClass:"text"},[e._v("移除 "+e._s(t.ApplyUserName)+" "+e._s(t.RoleName)+" 权限管理功能。")]):e._e(),e._v(" "),10==t.BusinessType?s("p",{staticClass:"text"},[e._v("新增 "+e._s(t.ApplyUserName)+" 系统管理员身份。")]):e._e(),e._v(" "),11==t.BusinessType?s("p",{staticClass:"text"},[e._v("移除 "+e._s(t.ApplyUserName)+" 系统管理员身份。")]):e._e(),e._v(" "),12==t.BusinessType?s("p",{staticClass:"text"},[e._v("新增 "+e._s(t.RoleName)+" 所管理的权限。")]):e._e(),e._v(" "),16==t.BusinessType?s("p",{staticClass:"text"},[e._v("变更 "+e._s(t.RoleName)+" 所管理的权限。")]):e._e(),e._v(" "),13==t.BusinessType?s("p",{staticClass:"text"},[e._v("移除了 "+e._s(e.config.isSelf?"我":t.ApplyUserName)+" 的所有权限")]):e._e(),e._v(" "),14==t.BusinessType||15==t.BusinessType?s("p",{staticClass:"text"},[e._v("移除了 "+e._s(e.config.isSelf?"我":t.ApplyUserName)+" 的 "+e._s(t.BranchName||"")+"“"+e._s(t.MenuName)+"”权限")]):e._e()])])})):e._e(),e._v(" "),e.data.list&&e.data.list.length<=0?s("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e()]),e._v(" "),e.data.list.length>0?s("div",{staticClass:"ui ui-scrollRefresh"},[e.config.isLoadAll?e._e():[s("i",{staticClass:"iconfont icon-load"}),s("span",[e._v("加载中")])],e._v(" "),e.config.isLoadAll?[s("span",[e._v("没有更多了")])]:e._e()],2):e._e()])])},staticRenderFns:[]}},187:function(e,t,s){var a=s(123);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(2)("0814df83",a,!0)},68:function(e,t,s){function a(e){s(187)}var i=s(1)(s(99),s(156),a,"data-v-10f4b248",null);e.exports=i.exports},99:function(e,t,s){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return{data:{list:[]},config:{userId:0,isSelf:!1,pageIndex:1,pageSize:20,isLoadAll:!1,isSendAjax:!1,isSendFirst:!1,searchAjaxVal:"",searchBox:{searchVal:"",placeholder:"关键字搜索"}}}};t.default={data:function(){return new i},activated:function(){var e=this;e.config.userId=parseInt(Bestone.util.query().UserId,10),e.config.isSelf=!!Bestone.util.query().isSelf,Bestone.ui.pageInit({setTitle:"权限日志",reviewCallBack:function(){e.config.isSendAjax=!0,Bestone.util.ajax({url:e.config.userId?"api/UserManage/GetUserLogList":"api/UserManage/GetLogList",data:JSON.stringify({PageIndex:1,PageSize:e.config.pageSize,Keyword:e.config.searchAjaxVal,UserId:e.config.userId}),success:function(t){e.config.isSendFirst=!0,t.data.list.length<e.config.pageSize?e.config.isLoadAll=!0:e.config.isLoadAll=!1,e.data.list=t.data.list||[]},complete:function(){e.config.isSendAjax=!1}})}}),Bestone.util.scrollRefresh({callback:function(t){e.config.isSendAjax||e.config.isLoadAll||(e.config.isSendAjax=!0,Bestone.util.ajax({url:e.config.userId?"api/UserManage/GetUserLogList":"api/UserManage/GetLogList",showLoad:!1,data:JSON.stringify({PageIndex:e.config.pageIndex+1,PageSize:e.config.pageSize,UserId:e.config.userId,Keyword:e.config.searchAjaxVal}),success:function(t){var s;t.data.list.length<e.config.pageSize&&(e.config.isLoadAll=!0),e.config.pageIndex=t.data.page,(s=e.data.list).push.apply(s,a(t.data.list))},complete:function(){e.config.isSendAjax=!1}}))}})},deactivated:function(){var e=this;Bestone.util.resetData(function(){e.data=i().data,e.config=i().config})},methods:{searchClickDeal:function(e){var t=this;t.config.isSendAjax=!0,Bestone.util.ajax({url:t.config.userId?"api/UserManage/GetUserLogList":"api/UserManage/GetLogList",data:JSON.stringify({PageIndex:1,PageSize:t.config.pageSize,UserId:t.config.userId,Keyword:e}),success:function(s){t.config.searchAjaxVal=e,t.config.pageIndex=1,s.data.list.length<t.config.pageSize?t.config.isLoadAll=!0:t.config.isLoadAll=!1,t.data.list=s.data.list||[]},complete:function(){t.config.isSendAjax=!1}})},searchValChangeDeal:function(e){this.config.searchBox.searchVal=e},viewDetail:function(e,t){Bestone.util.vueJump({path:"/applyRecord/applyRecordDetail",query:{ApplyId:e.ApplyId}})}}}}});