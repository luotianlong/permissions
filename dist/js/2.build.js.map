{"version":3,"sources":["webpack:///js/2.build.js","webpack:///setConfigAdmin.vue","webpack:///./src/component/permissionMgmtConfig/setConfigAdmin.vue?7d15","webpack:///./src/component/permissionMgmtConfig/setConfigAdmin.vue?2166","webpack:///./src/component/permissionMgmtConfig/setConfigAdmin.vue?9f58","webpack:///./src/component/permissionMgmtConfig/setConfigAdmin.vue"],"names":["webpackJsonp","117","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","Object","defineProperty","value","initData","data","list","config","pageIndex","pageSize","isLoadAll","isSendAjax","isFirstAjax","searchAjaxVal","searchBox","searchVal","placeholder","needOper","item","index","modalBox","isShow","content","btn","text","handel","activated","self","this","Bestone","ui","pageInit","setTitle","reviewCallBack","util","ajax","url","JSON","stringify","PageIndex","PageSize","Keyword","success","ajaxData","complete","scrollRefresh","callback","height","showLoad","_self$data$list","page","push","apply","deactivated","resetData","methods","textStatusDeal","changePermission","Status","User_UserName","confirmClickDeal","UserId","User_ID","OperId","user","id","OperName","name","message","newItem","splice","cancelClickDeal","searchClickDeal","str","searchValChangeDeal","133","exports","undefined","166","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","on","searchClick","searchValChange","_v","_l","_s","User_Name","Branch_Name","class","tag","pressup","$event","preventDefault","tap","_e","setConfig","confirmClick","cancelClick","staticRenderFns","197","locals","86","injectStyle","ssrContext","Component"],"mappings":"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","file":"js/2.build.js?caf399ba","sourcesContent":["webpackJsonp([2],{\n\n/***/ 117:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar initData = function initData() {\n    return {\n        data: {\n            list: []\n        },\n        config: {\n            pageIndex: 1,\n            pageSize: 10,\n            isLoadAll: false, // 是否加载所有数据\n            isSendAjax: false, // 是否发起请求\n            isFirstAjax: true, // 是否第一次发起请求\n            searchAjaxVal: '',\n            searchBox: {\n                searchVal: '',\n                placeholder: '登录账号/姓名搜索'\n            },\n            needOper: {\n                item: {},\n                index: 0\n            }, // 需要操作的item\n            modalBox: {\n                isShow: false,\n                content: '',\n                btn: [{\n                    text: '确定',\n                    handel: 'confirmClick'\n                }, {\n                    text: '取消',\n                    handel: 'cancelClick'\n                }]\n            }\n        }\n    };\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return new initData();\n    },\n\n    activated: function activated() {\n        var self = this;\n        Bestone.ui.pageInit({\n            setTitle: '设置“配置管理员”',\n            reviewCallBack: function reviewCallBack() {\n                self.config.isSendAjax = true;\n                Bestone.util.ajax({\n                    url: 'api/AuthManage/GetUserWithRoleWhiteList',\n                    data: JSON.stringify({\n                        PageIndex: 1,\n                        PageSize: self.config.pageSize,\n                        Keyword: self.config.searchAjaxVal\n                    }),\n                    success: function success(ajaxData) {\n                        self.config.isFirstAjax = false;\n                        self.data.list = ajaxData.data.list || [];\n                        if (ajaxData.data.list.length < self.config.pageSize) {\n                            self.config.isLoadAll = true;\n                        }\n                    },\n                    complete: function complete() {\n                        self.config.isSendAjax = false;\n                    }\n                });\n            }\n        });\n\n        // 滚动加载\n        Bestone.util.scrollRefresh({\n            callback: function callback(height) {\n                if (!self.config.isFirstAjax && !self.config.isSendAjax && !self.config.isLoadAll) {\n                    self.config.isSendAjax = true;\n                    Bestone.util.ajax({\n                        url: 'api/AuthManage/GetUserWithRoleWhiteList',\n                        showLoad: false,\n                        data: JSON.stringify({\n                            PageIndex: self.config.pageIndex + 1,\n                            PageSize: self.config.pageSize,\n                            Keyword: self.config.searchAjaxVal\n                        }),\n                        success: function success(ajaxData) {\n                            var _self$data$list;\n\n                            if (ajaxData.data.list.length < self.config.pageSize) {\n                                self.config.isLoadAll = true;\n                            }\n                            self.config.pageIndex = ajaxData.data.page; // 更新pageIndex\n                            (_self$data$list = self.data.list).push.apply(_self$data$list, _toConsumableArray(ajaxData.data.list)); // 更新数组\n                        },\n                        complete: function complete() {\n                            self.config.isSendAjax = false;\n                        }\n                    });\n                }\n            }\n        });\n    },\n    deactivated: function deactivated() {\n        var self = this;\n        // 回退时清除数据\n        Bestone.util.resetData(function () {\n            self.data = initData().data;\n            self.config = initData().config;\n        });\n    },\n    methods: {\n        // 管理范围状态处理\n        textStatusDeal: function textStatusDeal(arr) {\n            return Bestone.util.textStatusDeal(arr);\n        },\n        // 修改权限\n        changePermission: function changePermission(item, index) {\n            var self = this;\n            var text = '';\n            self.config.needOper.item = item;\n            self.config.needOper.index = index;\n            if (item.Status == 200) {\n                // 已经添加\n                text = '移除';\n            } else {\n                // 未添加\n                text = '添加';\n            }\n            self.config.modalBox.content = '<p style=\"font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;\">确定' + text + ' <span style=\"color: #23A4FF;\">' + item.User_UserName + '</span> 的权限？</p>';\n            self.config.modalBox.isShow = true;\n        },\n        // 弹出框确认\n        confirmClickDeal: function confirmClickDeal() {\n            var self = this;\n            var item = self.config.needOper.item;\n            var index = self.config.needOper.index;\n            if (item.Status == 200) {\n                // 移除权限\n                Bestone.util.ajax({\n                    url: 'api/AuthManage/DeleteRoleWhiteList',\n                    data: JSON.stringify({\n                        UserId: item.User_ID,\n                        OperId: Bestone.user.id,\n                        OperName: Bestone.user.name\n                    }),\n                    success: function success(ajaxData) {\n                        Bestone.ui.message({\n                            content: '移除成功'\n                        });\n                        self.config.modalBox.isShow = false;\n\n                        var newItem = item;\n                        newItem.Status = 400;\n                        self.data.list.splice(index, 1, newItem);\n                    }\n                });\n            } else {\n                // 添加权限\n                Bestone.util.ajax({\n                    url: 'api/AuthManage/AddRoleWhiteList',\n                    data: JSON.stringify({\n                        UserId: item.User_ID,\n                        OperId: Bestone.user.id,\n                        OperName: Bestone.user.name\n                    }),\n                    success: function success(ajaxData) {\n                        Bestone.ui.message({\n                            content: '添加成功'\n                        });\n                        self.config.modalBox.isShow = false;\n\n                        var newItem = item;\n                        newItem.Status = 200;\n                        self.data.list.splice(index, 1, newItem);\n                    }\n                });\n            }\n        },\n        // 弹出框取消\n        cancelClickDeal: function cancelClickDeal() {\n            var self = this;\n            self.config.modalBox.isShow = false;\n        },\n        // 搜索点击\n        searchClickDeal: function searchClickDeal(str) {\n            var self = this;\n            self.config.isSendAjax = true;\n            Bestone.util.ajax({\n                url: 'api/AuthManage/GetUserWithRoleWhiteList',\n                data: JSON.stringify({\n                    PageIndex: 1,\n                    PageSize: self.config.pageSize,\n                    Keyword: str\n                }),\n                success: function success(ajaxData) {\n                    self.config.isFirstAjax = false;\n                    self.config.searchAjaxVal = str;\n                    self.config.pageIndex = 1;\n                    if (ajaxData.data.list.length < self.config.pageSize) {\n                        self.config.isLoadAll = true;\n                    } else {\n                        self.config.isLoadAll = false;\n                    }\n                    self.data.list = ajaxData.data.list || [];\n                },\n                complete: function complete() {\n                    self.config.isSendAjax = false;\n                }\n            });\n        },\n        // 输入框值改变\n        searchValChangeDeal: function searchValChangeDeal(str) {\n            this.config.searchBox.searchVal = str; // 必须，用于父子组件数据双向绑定\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 133:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#set-config-admin[data-v-516184f2]{padding-top:10px}#set-config-admin>.search[data-v-516184f2]{background-color:#fff;padding:10px 15px}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"set-config-admin\"\n    }\n  }, [_c('div', {\n    staticClass: \"search\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui ui-card-list\"\n  }, [(_vm.data.list && _vm.data.list.length > 0) ? _c('ul', _vm._l((_vm.data.list), function(item, index) {\n    return _c('li', [_c('div', {\n      staticClass: \"list-text\"\n    }, [_c('p', [_vm._v(\"TDS账号：\" + _vm._s(item.User_Name))]), _vm._v(\" \"), _c('p', [_vm._v(\"姓名：\" + _vm._s(item.User_UserName))]), _vm._v(\" \"), _c('p', [_vm._v(\"账号所属公司：\" + _vm._s(item.Branch_Name))])]), _vm._v(\" \"), _c('v-touch', {\n      staticClass: \"btn\",\n      class: item.Status == 200 ? 'red' : '',\n      attrs: {\n        \"tag\": \"div\"\n      },\n      on: {\n        \"pressup\": function($event) {\n          $event.preventDefault();\n          _vm.changePermission(item, index)\n        },\n        \"tap\": function($event) {\n          $event.preventDefault();\n          _vm.changePermission(item, index)\n        }\n      }\n    }, [_vm._v(_vm._s(item.Status == 200 ? '移除权限' : '添加权限'))])], 1)\n  })) : _vm._e(), _vm._v(\" \"), (_vm.data.list && _vm.data.list.length <= 0) ? _c('div', {\n    staticClass: \"no-data\"\n  }, [_vm._v(\"暂无数据\")]) : _vm._e()]), _vm._v(\" \"), (_vm.data.list.length > 0) ? _c('div', {\n    staticClass: \"ui ui-scrollRefresh\"\n  }, [(!_vm.config.isLoadAll) ? [_c('i', {\n    staticClass: \"iconfont icon-load\"\n  }), _c('span', [_vm._v(\"加载中\")])] : _vm._e(), _vm._v(\" \"), (_vm.config.isLoadAll) ? [_c('span', [_vm._v(\"没有更多了\")])] : _vm._e()], 2) : _vm._e(), _vm._v(\" \"), _c('modal-box', {\n    attrs: {\n      \"setConfig\": _vm.config.modalBox\n    },\n    on: {\n      \"confirmClick\": _vm.confirmClickDeal,\n      \"cancelClick\": _vm.cancelClickDeal\n    }\n  })], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 197:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(133);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"3ab4494f\", content, true);\n\n/***/ }),\n\n/***/ 86:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(197)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(117),\n  /* template */\n  __webpack_require__(166),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-516184f2\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/2.build.js?caf399ba","<!-- 权限管理配置-新增权限管理配置 -->\r\n<template>\r\n    <div>\r\n    <div id=\"set-config-admin\">\r\n        <div class=\"search\"><search-box :searchVal=\"config.searchBox.searchVal\" :placeholder=\"config.searchBox.placeholder\" @searchClick=\"searchClickDeal\" @searchValChange=\"searchValChangeDeal\"></search-box></div>\r\n        <div class=\"ui ui-card-list\">\r\n            <ul v-if=\"data.list && data.list.length>0\">\r\n                <li v-for=\"(item,index) in data.list\">\r\n                    <div class=\"list-text\">\r\n                        <p>TDS账号：{{item.User_Name}}</p>\r\n                        <p>姓名：{{item.User_UserName}}</p>\r\n                        <p>账号所属公司：{{item.Branch_Name}}</p>\r\n                    </div>\r\n                    <v-touch tag=\"div\" class=\"btn\" :class=\"item.Status==200 ? 'red' : ''\" @pressup.prevent=\"changePermission(item,index)\" @tap.prevent=\"changePermission(item,index)\">{{item.Status==200 ? '移除权限' : '添加权限'}}</v-touch>\r\n                </li>\r\n            </ul>\r\n            <div v-if=\"data.list && data.list.length<=0\" class=\"no-data\">暂无数据</div>\r\n        </div>\r\n        <div v-if=\"data.list.length>0\" class=\"ui ui-scrollRefresh\">\r\n            <template v-if=\"!config.isLoadAll\">\r\n                <i class=\"iconfont icon-load\"></i><span>加载中</span>\r\n            </template>\r\n            <template v-if=\"config.isLoadAll\">\r\n                <span>没有更多了</span>\r\n            </template>\r\n        </div>\r\n        <!-- 对话框 -->\r\n        <modal-box :setConfig=\"config.modalBox\" @confirmClick=\"confirmClickDeal\" @cancelClick=\"cancelClickDeal\"></modal-box>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script scoped>\r\n    var initData = function () {\r\n        return {\r\n            data: {\r\n                list: []\r\n            },\r\n            config: {\r\n                pageIndex: 1,\r\n                pageSize: 10,\r\n                isLoadAll: false, // 是否加载所有数据\r\n                isSendAjax: false, // 是否发起请求\r\n                isFirstAjax: true, // 是否第一次发起请求\r\n                searchAjaxVal: '',\r\n                searchBox: {\r\n                    searchVal: '',\r\n                    placeholder: '登录账号/姓名搜索'\r\n                },\r\n                needOper: {\r\n                    item: {},\r\n                    index: 0\r\n                }, // 需要操作的item\r\n                modalBox: {\r\n                    isShow: false,\r\n                    content: '',\r\n                    btn: [{\r\n                        text: '确定',\r\n                        handel: 'confirmClick'\r\n                    }, {\r\n                        text: '取消',\r\n                        handel: 'cancelClick'\r\n                    }]\r\n                }\r\n            }\r\n        }\r\n    };\r\n    export default {\r\n        data() {\r\n            return new initData()\r\n        },\r\n        activated: function () {\r\n            let self = this;\r\n            Bestone.ui.pageInit({\r\n                setTitle: '设置“配置管理员”',\r\n                reviewCallBack: function () {\r\n                    self.config.isSendAjax = true;\r\n                    Bestone.util.ajax({\r\n                        url: 'api/AuthManage/GetUserWithRoleWhiteList',\r\n                        data: JSON.stringify({\r\n                            PageIndex: 1,\r\n                            PageSize: self.config.pageSize,\r\n                            Keyword: self.config.searchAjaxVal\r\n                        }),\r\n                        success: function (ajaxData) {\r\n                            self.config.isFirstAjax = false;\r\n                            self.data.list = ajaxData.data.list || [];\r\n                            if(ajaxData.data.list.length<self.config.pageSize) {\r\n                                self.config.isLoadAll = true;\r\n                            }\r\n                        },\r\n                        complete: function () {\r\n                            self.config.isSendAjax = false;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // 滚动加载\r\n            Bestone.util.scrollRefresh({\r\n                callback: function (height) {\r\n                    if(!self.config.isFirstAjax && !self.config.isSendAjax && !self.config.isLoadAll) {\r\n                        self.config.isSendAjax = true;\r\n                        Bestone.util.ajax({\r\n                            url: 'api/AuthManage/GetUserWithRoleWhiteList',\r\n                            showLoad: false,\r\n                            data: JSON.stringify({\r\n                                PageIndex: self.config.pageIndex + 1,\r\n                                PageSize: self.config.pageSize,\r\n                                Keyword: self.config.searchAjaxVal\r\n                            }),\r\n                            success: function (ajaxData) {\r\n                                if(ajaxData.data.list.length<self.config.pageSize) {\r\n                                    self.config.isLoadAll = true;\r\n                                }\r\n                                self.config.pageIndex = ajaxData.data.page; // 更新pageIndex\r\n                                self.data.list.push(...ajaxData.data.list); // 更新数组\r\n                            },\r\n                            complete: function () {\r\n                                self.config.isSendAjax = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        deactivated: function () {\r\n            var self = this;\r\n            // 回退时清除数据\r\n            Bestone.util.resetData(function () {\r\n                self.data = initData().data;\r\n                self.config = initData().config;\r\n            });\r\n        },\r\n        methods: {\r\n            // 管理范围状态处理\r\n            textStatusDeal: function (arr) {\r\n                return Bestone.util.textStatusDeal(arr);\r\n            },\r\n            // 修改权限\r\n            changePermission: function (item,index) {\r\n                let self = this;\r\n                let text = '';\r\n                self.config.needOper.item = item;\r\n                self.config.needOper.index = index;\r\n                if(item.Status==200) { // 已经添加\r\n                    text = '移除';\r\n                }else { // 未添加\r\n                    text = '添加';\r\n                }\r\n                self.config.modalBox.content = '<p style=\"font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;\">确定' + text + ' <span style=\"color: #23A4FF;\">' + item.User_UserName + '</span> 的权限？</p>';\r\n                self.config.modalBox.isShow = true;\r\n            },\r\n            // 弹出框确认\r\n            confirmClickDeal: function () {\r\n                let self = this;\r\n                let item = self.config.needOper.item;\r\n                let index = self.config.needOper.index;\r\n                if(item.Status==200) {\r\n                    // 移除权限\r\n                    Bestone.util.ajax({\r\n                        url: 'api/AuthManage/DeleteRoleWhiteList',\r\n                        data: JSON.stringify({\r\n                            UserId: item.User_ID,\r\n                            OperId: Bestone.user.id,\r\n                            OperName: Bestone.user.name\r\n                        }),\r\n                        success: function (ajaxData) {\r\n                            Bestone.ui.message({\r\n                                content: '移除成功'\r\n                            });\r\n                            self.config.modalBox.isShow = false;\r\n\r\n                            let newItem = item;\r\n                            newItem.Status = 400\r\n                            self.data.list.splice(index,1,newItem);\r\n                        }\r\n                    });\r\n                }else {\r\n                    // 添加权限\r\n                    Bestone.util.ajax({\r\n                        url: 'api/AuthManage/AddRoleWhiteList',\r\n                        data: JSON.stringify({\r\n                            UserId: item.User_ID,\r\n                            OperId: Bestone.user.id,\r\n                            OperName: Bestone.user.name\r\n                        }),\r\n                        success: function (ajaxData) {\r\n                            Bestone.ui.message({\r\n                                content: '添加成功'\r\n                            });\r\n                            self.config.modalBox.isShow = false;\r\n\r\n                            let newItem = item;\r\n                            newItem.Status = 200\r\n                            self.data.list.splice(index,1,newItem);\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            // 弹出框取消\r\n            cancelClickDeal: function () {\r\n                let self = this;\r\n                self.config.modalBox.isShow = false;\r\n            },\r\n            // 搜索点击\r\n            searchClickDeal: function (str) {\r\n                let self = this;\r\n                self.config.isSendAjax = true;\r\n                Bestone.util.ajax({\r\n                    url: 'api/AuthManage/GetUserWithRoleWhiteList',\r\n                    data: JSON.stringify({\r\n                        PageIndex: 1,\r\n                        PageSize: self.config.pageSize,\r\n                        Keyword: str\r\n                    }),\r\n                    success: function (ajaxData) {\r\n                        self.config.isFirstAjax = false;\r\n                        self.config.searchAjaxVal = str;\r\n                        self.config.pageIndex = 1;\r\n                        if(ajaxData.data.list.length<self.config.pageSize) {\r\n                            self.config.isLoadAll = true;\r\n                        }else {\r\n                            self.config.isLoadAll = false;\r\n                        }\r\n                        self.data.list = ajaxData.data.list || [];\r\n                    },\r\n                    complete: function () {\r\n                        self.config.isSendAjax = false;\r\n                    }\r\n                });\r\n            },\r\n            // 输入框值改变\r\n            searchValChangeDeal: function (str) {\r\n                this.config.searchBox.searchVal=str; // 必须，用于父子组件数据双向绑定\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    #set-config-admin {\r\n        padding-top: 10px;\r\n        & > .search {\r\n            background-color: #fff;\r\n            padding: 10px 15px;\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// setConfigAdmin.vue?3877d30a","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#set-config-admin[data-v-516184f2]{padding-top:10px}#set-config-admin>.search[data-v-516184f2]{background-color:#fff;padding:10px 15px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-516184f2\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/permissionMgmtConfig/setConfigAdmin.vue\n// module id = 133\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"set-config-admin\"\n    }\n  }, [_c('div', {\n    staticClass: \"search\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui ui-card-list\"\n  }, [(_vm.data.list && _vm.data.list.length > 0) ? _c('ul', _vm._l((_vm.data.list), function(item, index) {\n    return _c('li', [_c('div', {\n      staticClass: \"list-text\"\n    }, [_c('p', [_vm._v(\"TDS账号：\" + _vm._s(item.User_Name))]), _vm._v(\" \"), _c('p', [_vm._v(\"姓名：\" + _vm._s(item.User_UserName))]), _vm._v(\" \"), _c('p', [_vm._v(\"账号所属公司：\" + _vm._s(item.Branch_Name))])]), _vm._v(\" \"), _c('v-touch', {\n      staticClass: \"btn\",\n      class: item.Status == 200 ? 'red' : '',\n      attrs: {\n        \"tag\": \"div\"\n      },\n      on: {\n        \"pressup\": function($event) {\n          $event.preventDefault();\n          _vm.changePermission(item, index)\n        },\n        \"tap\": function($event) {\n          $event.preventDefault();\n          _vm.changePermission(item, index)\n        }\n      }\n    }, [_vm._v(_vm._s(item.Status == 200 ? '移除权限' : '添加权限'))])], 1)\n  })) : _vm._e(), _vm._v(\" \"), (_vm.data.list && _vm.data.list.length <= 0) ? _c('div', {\n    staticClass: \"no-data\"\n  }, [_vm._v(\"暂无数据\")]) : _vm._e()]), _vm._v(\" \"), (_vm.data.list.length > 0) ? _c('div', {\n    staticClass: \"ui ui-scrollRefresh\"\n  }, [(!_vm.config.isLoadAll) ? [_c('i', {\n    staticClass: \"iconfont icon-load\"\n  }), _c('span', [_vm._v(\"加载中\")])] : _vm._e(), _vm._v(\" \"), (_vm.config.isLoadAll) ? [_c('span', [_vm._v(\"没有更多了\")])] : _vm._e()], 2) : _vm._e(), _vm._v(\" \"), _c('modal-box', {\n    attrs: {\n      \"setConfig\": _vm.config.modalBox\n    },\n    on: {\n      \"confirmClick\": _vm.confirmClickDeal,\n      \"cancelClick\": _vm.cancelClickDeal\n    }\n  })], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-516184f2\",\"hasScoped\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/component/permissionMgmtConfig/setConfigAdmin.vue\n// module id = 166\n// module chunks = 2","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-516184f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./setConfigAdmin.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"3ab4494f\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-516184f2\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/permissionMgmtConfig/setConfigAdmin.vue\n// module id = 197\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-516184f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./setConfigAdmin.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./setConfigAdmin.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-516184f2\\\",\\\"hasScoped\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./setConfigAdmin.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-516184f2\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/permissionMgmtConfig/setConfigAdmin.vue\n// module id = 86\n// module chunks = 2"],"sourceRoot":""}