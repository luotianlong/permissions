webpackJsonp([4],{115:function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return{data:{list:[]},config:{noDataText:"请输入条件搜索",pageIndex:1,pageSize:10,isLoadAll:!1,isSendAjax:!1,isSendFirst:!1,searchAjaxVal:"",searchBox:{searchVal:"",placeholder:"登录账号/姓名/权限管理部门名称搜索"},modalBox:{isShow:!1,content:"",btn:[{text:"确定",handel:"confirmClick"},{text:"取消",handel:"cancelClick"}]}}}};t.default={data:function(){return new i},activated:function(){var e=this;Bestone.ui.pageInit({setTitle:"管理“权限管理”配置",reviewCallBack:function(){}}),Bestone.ui.ddSetRight({control:!0,text:"移除权限",show:!0,onSuccess:function(){e.clearPermission()}}),Bestone.util.scrollRefresh({callback:function(t){!e.config.isSendFirst||e.config.isSendAjax||e.config.isLoadAll||(e.config.isSendAjax=!0,Bestone.util.ajax({url:"api/AuthManage/GetRoleManageList",showLoad:!1,data:JSON.stringify({PageIndex:e.config.pageIndex+1,PageSize:e.config.pageSize,Keyword:e.config.searchAjaxVal}),success:function(t){var a;t.data.list.length<e.config.pageSize&&(e.config.isLoadAll=!0),e.config.pageIndex=t.data.page,(a=e.data.list).push.apply(a,n(t.data.list))},complete:function(){e.config.isSendAjax=!1}}))}})},deactivated:function(){var e=this;Bestone.util.resetData(function(){e.data=i().data,e.config=i().config})},methods:{ClickDeal:function(e){var t=this;t.config.isSendAjax=!0,Bestone.util.ajax({url:"api/AuthManage/GetRoleManageList",data:JSON.stringify({PageIndex:1,PageSize:t.config.pageSize,Keyword:e}),success:function(a){t.config.searchAjaxVal=e,t.config.pageIndex=1,t.config.isSendFirst=!0,a.data.list.length<t.config.pageSize?t.config.isLoadAll=!0:t.config.isLoadAll=!1,t.data.list=a.data.list||[],t.config.noDataText="暂无数据"},complete:function(){t.config.isSendAjax=!1}})},ValChangeDeal:function(e){this.config.searchBox.searchVal=e},textStatusDeal:function(e){return Bestone.util.textStatusDeal(e)},checkBoxClick:function(e,t){function a(){return JSON.parse(JSON.stringify(e[t]))}var n=a();n.frontChecked=!0;var i=a();i.frontChecked=!1,e[t].frontChecked?e.splice(t,1,i):e.splice(t,1,n)},clearPermission:function(e){var t=this,a="";if($.each(t.data.list,function(e,t){t.frontChecked&&(a=a+t.Id+",")}),a.length<=0)return void Bestone.ui.message({content:"请至少选择一个"});t.config.modalBox.content='<p style="font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;">确定移除选中权限？</p>',t.config.modalBox.isShow=!0},confirmClickDeal:function(){var e=this,t="";if($.each(e.data.list,function(e,a){a.frontChecked&&(t=t+a.Id+",")}),t.length<=0)return void Bestone.ui.message({content:"请至少选择一个"});t=t.substring(0,t.length-1),Bestone.util.ajax({url:"api/AuthManage/DeleteRoleManage",data:JSON.stringify({Ids:t,OperId:Bestone.user.id,OperName:Bestone.user.name}),success:function(t){Bestone.ui.message({content:"移除成功"}),e.config.modalBox.isShow=!1,e.config.isSendAjax=!0,Bestone.util.ajax({url:"api/AuthManage/GetRoleManageList",data:JSON.stringify({PageIndex:1,PageSize:e.config.pageSize,Keyword:e.config.searchAjaxVal}),success:function(t){e.config.pageIndex=1,t.data.list.length<e.config.pageSize?e.config.isLoadAll=!0:e.config.isLoadAll=!1,e.data.list=t.data.list||[]},complete:function(){e.config.isSendAjax=!1}})}})},cancelClickDeal:function(){this.config.modalBox.isShow=!1}}}},147:function(e,t,a){t=e.exports=a(0)(void 0),t.push([e.i,"#permission-control[data-v-f407f6f0]{padding-top:10px}#permission-control>.search-content[data-v-f407f6f0]{background-color:#fff;padding:10px 15px}#permission-control>.list-content[data-v-f407f6f0]{margin-top:10px}#permission-control>.list-content>.no-data[data-v-f407f6f0]{color:#999;font-size:12px;line-height:20px;text-align:center;margin-top:50px;padding:0 20px}",""])},180:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"permission-control"}},[a("div",{staticClass:"search-content"},[a("search-box",{attrs:{searchVal:e.config.searchBox.searchVal,placeholder:e.config.searchBox.placeholder},on:{searchClick:e.ClickDeal,searchValChange:e.ValChangeDeal}})],1),e._v(" "),a("div",{staticClass:"list-content"},[e.data.list&&e.data.list.length>0?a("div",{staticClass:"ui ui-card-list"},[a("ul",e._l(e.data.list,function(t,n){return a("v-touch",{attrs:{tag:"li"},on:{pressup:function(t){t.preventDefault(),e.checkBoxClick(e.data.list,n)},tap:function(t){t.preventDefault(),e.checkBoxClick(e.data.list,n)}}},[a("div",{staticClass:"list-text"},[a("p",[e._v("TDS账号："+e._s(t.User_Name))]),e._v(" "),a("p",[e._v("姓名："+e._s(t.User_UserName))]),e._v(" "),a("p",[e._v("账号所属公司："+e._s(t.Branch_Name))]),e._v(" "),a("p",[e._v("管理的权限部门："+e._s(t.RoleName))])]),e._v(" "),a("div",{staticClass:"ui ui-checkbox",class:t.frontChecked?"checked":""},[a("span",{staticClass:"icon-content"},[a("i",{staticClass:"iconfont icon-gou"})])])])}))]):e._e(),e._v(" "),e.data.list&&e.data.list.length<=0?a("div",{staticClass:"no-data"},[e._v(e._s(e.config.noDataText))]):e._e()]),e._v(" "),e.data.list.length>0?a("div",{staticClass:"ui ui-scrollRefresh"},[e.config.isLoadAll?e._e():[a("i",{staticClass:"iconfont icon-load"}),a("span",[e._v("加载中")])],e._v(" "),e.config.isLoadAll?[a("span",[e._v("没有更多了")])]:e._e()],2):e._e(),e._v(" "),e._e(),e._v(" "),a("modal-box",{attrs:{setConfig:e.config.modalBox},on:{confirmClick:e.confirmClickDeal,cancelClick:e.cancelClickDeal}})],1)])},staticRenderFns:[]}},211:function(e,t,a){var n=a(147);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(2)("3fb3fc4e",n,!0)},84:function(e,t,a){function n(e){a(211)}var i=a(1)(a(115),a(180),n,"data-v-f407f6f0",null);e.exports=i.exports}});