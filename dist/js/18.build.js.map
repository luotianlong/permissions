{"version":3,"sources":["webpack:///js/18.build.js","webpack:///myPermissionMgmt.vue","webpack:///./src/component/myPermissionMgmt/myPermissionMgmt.vue?5266","webpack:///./src/component/myPermissionMgmt/myPermissionMgmt.vue?2cd7","webpack:///./src/component/myPermissionMgmt/myPermissionMgmt.vue?5880","webpack:///./src/component/myPermissionMgmt/myPermissionMgmt.vue"],"names":["webpackJsonp","101","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","Object","defineProperty","value","initData","data","list","config","pageIndex","pageSize","isLoadAll","isSendAjax","isSendFirst","searchAjaxVal","searchBox","searchVal","placeholder","activated","self","this","Bestone","ui","pageInit","setTitle","reviewCallBack","util","ajax","url","JSON","stringify","PageIndex","PageSize","Keyword","UserId","user","id","success","ajaxData","complete","ddSetRight","control","text","show","onSuccess","vueJump","path","query","isSelf","scrollRefresh","callback","height","showLoad","_self$data$list","page","push","apply","deactivated","resetData","methods","textStatusDeal","str","viewDetail","item","MenuCode","Menu_Code","MenuName","Menu_Name","applyPermission","searchClickDeal","searchValChangeDeal","142","exports","undefined","175","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","on","searchClick","searchValChange","_v","tag","pressup","$event","preventDefault","tap","_l","index","_s","Branch_Name","_e","staticRenderFns","206","content","locals","70","injectStyle","ssrContext","Component"],"mappings":"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","file":"js/18.build.js?2d827cd6","sourcesContent":["webpackJsonp([18],{\n\n/***/ 101:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar initData = function initData() {\n    return {\n        data: {\n            list: []\n        },\n        config: {\n            pageIndex: 1,\n            pageSize: 15,\n            isLoadAll: false, // 是否加载所有数据\n            isSendAjax: false, // 是否发起请求\n            isSendFirst: false, // 是否已发起第一次请求\n            searchAjaxVal: '',\n            searchBox: {\n                searchVal: '',\n                placeholder: '权限名称/分公司名称'\n            }\n        }\n    };\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return new initData();\n    },\n\n    activated: function activated() {\n        var self = this;\n        Bestone.ui.pageInit({\n            setTitle: '我的权限管理',\n            reviewCallBack: function reviewCallBack() {\n                self.config.isSendAjax = true;\n                Bestone.util.ajax({\n                    url: 'api/UserManage/GetMenuUserConfigAllByUser',\n                    data: JSON.stringify({\n                        PageIndex: 1,\n                        PageSize: self.config.pageSize,\n                        Keyword: self.config.searchAjaxVal,\n                        UserId: Bestone.user.id\n                    }),\n                    success: function success(ajaxData) {\n                        self.config.isSendFirst = true;\n                        if (ajaxData.data.list.length < self.config.pageSize) {\n                            self.config.isLoadAll = true;\n                        } else {\n                            self.config.isLoadAll = false;\n                        }\n                        self.data.list = ajaxData.data.list || [];\n                    },\n                    complete: function complete() {\n                        self.config.isSendAjax = false;\n                    }\n                });\n            }\n        });\n\n        Bestone.ui.ddSetRight({\n            control: true,\n            text: '日志',\n            show: true,\n            onSuccess: function onSuccess() {\n                Bestone.util.vueJump({\n                    path: '/log/userLog',\n                    query: {\n                        UserId: Bestone.user.id,\n                        isSelf: true\n                    }\n                });\n            }\n        });\n\n        // 数据滚动加载\n        Bestone.util.scrollRefresh({\n            callback: function callback(height) {\n                if (self.config.isSendFirst && !self.config.isSendAjax && !self.config.isLoadAll) {\n                    self.config.isSendAjax = true;\n                    Bestone.util.ajax({\n                        url: 'api/UserManage/GetMenuUserConfigAllByUser',\n                        showLoad: false,\n                        data: JSON.stringify({\n                            PageIndex: self.config.pageIndex + 1,\n                            PageSize: self.config.pageSize,\n                            Keyword: self.config.searchAjaxVal,\n                            UserId: Bestone.user.id\n                        }),\n                        success: function success(ajaxData) {\n                            var _self$data$list;\n\n                            if (ajaxData.data.list.length < self.config.pageSize) {\n                                self.config.isLoadAll = true;\n                            }\n                            self.config.pageIndex = ajaxData.data.page; // 更新pageIndex\n                            (_self$data$list = self.data.list).push.apply(_self$data$list, _toConsumableArray(ajaxData.data.list)); // 更新树形数组\n                        },\n                        complete: function complete() {\n                            self.config.isSendAjax = false;\n                        }\n                    });\n                }\n            }\n        });\n    },\n    deactivated: function deactivated() {\n        var self = this;\n        // 回退时清除数据\n        Bestone.util.resetData(function () {\n            self.data = initData().data;\n            self.config = initData().config;\n        });\n    },\n    methods: {\n        // 管理范围状态处理\n        textStatusDeal: function textStatusDeal(str) {\n            return Bestone.util.textStatusDeal(str);\n        },\n        viewDetail: function viewDetail(item) {\n            Bestone.util.vueJump({\n                path: '/myPermissionMgmt/myPermissionDetail',\n                query: {\n                    MenuCode: item.Menu_Code,\n                    MenuName: item.Menu_Name || '查看详细'\n                }\n            });\n        },\n        // 申请权限\n        applyPermission: function applyPermission() {\n            Bestone.util.vueJump({ path: '/applyPermission/applyPermission' });\n        },\n        // 搜索点击\n        searchClickDeal: function searchClickDeal(str) {\n            var self = this;\n            self.config.isSendAjax = true;\n            Bestone.util.ajax({\n                url: 'api/UserManage/GetMenuUserConfigAllByUser',\n                data: JSON.stringify({\n                    PageIndex: 1,\n                    PageSize: self.config.pageSize,\n                    Keyword: str,\n                    UserId: Bestone.user.id\n                }),\n                success: function success(ajaxData) {\n                    self.config.searchAjaxVal = str;\n                    self.config.pageIndex = 1;\n                    self.config.isSendFirst = true;\n                    if (ajaxData.data.list.length < self.config.pageSize) {\n                        self.config.isLoadAll = true;\n                    } else {\n                        self.config.isLoadAll = false;\n                    }\n                    self.data.list = ajaxData.data.list || [];\n                },\n                complete: function complete() {\n                    self.config.isSendAjax = false;\n                }\n            });\n        },\n        // 输入框值改变\n        searchValChangeDeal: function searchValChangeDeal(str) {\n            this.config.searchBox.searchVal = str; // 必须，用于父子组件数据双向绑定\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 142:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#my-permission-mgmt[data-v-7f24f319]{padding-top:10px}#my-permission-mgmt>.search[data-v-7f24f319]{background-color:#fff;padding:10px 15px}#my-permission-mgmt>.list[data-v-7f24f319]{padding:0 10px}#my-permission-mgmt>.list>ul>li[data-v-7f24f319]{position:relative;background-color:#fff;border-radius:5px;padding:10px 95px 10px 10px;margin-top:10px;overflow:hidden;font-size:12px}#my-permission-mgmt>.list>ul>li>.list-text>p[data-v-7f24f319]{line-height:20px;color:#404040;height:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#my-permission-mgmt>.list>ul>li>.view-detail-btn[data-v-7f24f319]{position:absolute;top:15px;right:10px;cursor:pointer;width:73px;height:28px;border:1px solid #38adff;color:#38adff;line-height:28px;text-align:center;border-radius:3px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#my-permission-mgmt>.list>ul>li>.view-detail-btn[data-v-7f24f319]:active{background-color:#ddd}#my-permission-mgmt>.no-data[data-v-7f24f319]{color:#999;font-size:12px;line-height:20px;text-align:center;margin-top:50px;padding:0 20px}#my-permission-mgmt>.no-data>span[data-v-7f24f319]{color:#38adff}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 175:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"my-permission-mgmt\"\n    }\n  }, [_c('div', {\n    staticClass: \"search\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui ui-title\"\n  }, [_c('p', {\n    staticClass: \"omit\"\n  }, [_vm._v(\"你拥有的TDS业支端权限\")]), _vm._v(\" \"), _c('v-touch', {\n    staticClass: \"right-btn\",\n    attrs: {\n      \"tag\": \"a\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      }\n    }\n  }, [_vm._v(\"去申请\"), _c('i', {\n    staticClass: \"iconfont icon-you\"\n  })])], 1), _vm._v(\" \"), (_vm.data.list && _vm.data.list.length > 0) ? [_c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.data.list), function(item, index) {\n    return _c('li', [_c('div', {\n      staticClass: \"list-text\"\n    }, [_c('p', [_vm._v(\"权限名称：\" + _vm._s(_vm.textStatusDeal(item.Menu_Name)))]), _vm._v(\" \"), _c('p', [_vm._v(\"管理范围：\" + _vm._s(_vm.textStatusDeal(item.Branch_Name)))])]), _vm._v(\" \"), _c('v-touch', {\n      staticClass: \"view-detail-btn\",\n      attrs: {\n        \"tag\": \"div\"\n      },\n      on: {\n        \"pressup\": function($event) {\n          $event.preventDefault();\n          _vm.viewDetail(item, index)\n        },\n        \"tap\": function($event) {\n          $event.preventDefault();\n          _vm.viewDetail(item, index)\n        }\n      }\n    }, [_vm._v(\"查看详细\")])], 1)\n  }))])] : _vm._e(), _vm._v(\" \"), (_vm.data.list && _vm.data.list.length <= 0) ? _c('div', {\n    staticClass: \"no-data\"\n  }, [_vm._v(\"你还没有该权限，\"), _c('br'), _vm._v(\"点击右上方\"), _c('span', [_vm._v(\"去申请\")]), _vm._v(\"按钮申请\")]) : _vm._e(), _vm._v(\" \"), (_vm.data.list.length > 0) ? _c('div', {\n    staticClass: \"ui ui-scrollRefresh\"\n  }, [(!_vm.config.isLoadAll) ? [_c('i', {\n    staticClass: \"iconfont icon-load\"\n  }), _c('span', [_vm._v(\"加载中\")])] : _vm._e(), _vm._v(\" \"), (_vm.config.isLoadAll) ? [_c('span', [_vm._v(\"没有更多了\")])] : _vm._e()], 2) : _vm._e(), _vm._v(\" \"), (false) ? _c('div', {\n    staticClass: \"ui ui-bottom-btn\"\n  }, [_c('v-touch', {\n    staticClass: \"btn\",\n    attrs: {\n      \"tag\": \"div\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      }\n    }\n  }, [_vm._v(\"申请权限\")])], 1) : _vm._e()], 2)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 206:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(142);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"f8120d52\", content, true);\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(206)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(101),\n  /* template */\n  __webpack_require__(175),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-7f24f319\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/18.build.js?2d827cd6","<!-- 我的权限管理 -->\r\n<template>\r\n    <div>\r\n        <div id=\"my-permission-mgmt\">\r\n            <div class=\"search\"><search-box :searchVal=\"config.searchBox.searchVal\" :placeholder=\"config.searchBox.placeholder\" @searchClick=\"searchClickDeal\" @searchValChange=\"searchValChangeDeal\"></search-box></div>\r\n            <div class=\"ui ui-title\">\r\n                <p class=\"omit\">你拥有的TDS业支端权限</p>\r\n                <v-touch tag=\"a\" class=\"right-btn\" @pressup.prevent=\"applyPermission\" @tap.prevent=\"applyPermission\">去申请<i class=\"iconfont icon-you\"></i></v-touch>\r\n            </div>\r\n            <template v-if=\"data.list && data.list.length>0\">\r\n                <div class=\"list\">\r\n                    <ul>\r\n                        <li v-for=\"(item,index) in data.list\">\r\n                            <div class=\"list-text\">\r\n                                <p>权限名称：{{textStatusDeal(item.Menu_Name)}}</p>\r\n                                <p>管理范围：{{textStatusDeal(item.Branch_Name)}}</p>\r\n                            </div>\r\n                            <v-touch tag=\"div\" class=\"view-detail-btn\" @pressup.prevent=\"viewDetail(item,index)\" @tap.prevent=\"viewDetail(item,index)\">查看详细</v-touch>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </template>\r\n            <div v-if=\"data.list && data.list.length<=0\" class=\"no-data\">你还没有该权限，<br/>点击右上方<span>去申请</span>按钮申请</div>\r\n            <div v-if=\"data.list.length>0\" class=\"ui ui-scrollRefresh\">\r\n                <template v-if=\"!config.isLoadAll\">\r\n                    <i class=\"iconfont icon-load\"></i><span>加载中</span>\r\n                </template>\r\n                <template v-if=\"config.isLoadAll\">\r\n                    <span>没有更多了</span>\r\n                </template>\r\n            </div>\r\n            <div v-if=\"false\" class=\"ui ui-bottom-btn\">\r\n                <v-touch tag=\"div\" class=\"btn\" @pressup.prevent=\"applyPermission\" @tap.prevent=\"applyPermission\">申请权限</v-touch>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script scoped>\r\n    var initData = function () {\r\n        return {\r\n            data: {\r\n                list: []\r\n            },\r\n            config: {\r\n                pageIndex: 1,\r\n                pageSize: 15,\r\n                isLoadAll: false, // 是否加载所有数据\r\n                isSendAjax: false, // 是否发起请求\r\n                isSendFirst: false, // 是否已发起第一次请求\r\n                searchAjaxVal: '',\r\n                searchBox: {\r\n                    searchVal: '',\r\n                    placeholder: '权限名称/分公司名称',\r\n                }\r\n            }\r\n        }\r\n    };\r\n    export default {\r\n        data() {\r\n            return new initData()\r\n        },\r\n        activated: function () {\r\n            let self = this;\r\n            Bestone.ui.pageInit({\r\n                setTitle: '我的权限管理',\r\n                reviewCallBack: function () {\r\n                    self.config.isSendAjax = true;\r\n                    Bestone.util.ajax({\r\n                        url: 'api/UserManage/GetMenuUserConfigAllByUser',\r\n                        data: JSON.stringify({\r\n                            PageIndex: 1,\r\n                            PageSize: self.config.pageSize,\r\n                            Keyword: self.config.searchAjaxVal,\r\n                            UserId: Bestone.user.id\r\n                        }),\r\n                        success: function (ajaxData) {\r\n                            self.config.isSendFirst = true;\r\n                            if(ajaxData.data.list.length<self.config.pageSize) {\r\n                                self.config.isLoadAll = true;\r\n                            }else {\r\n                                self.config.isLoadAll = false;\r\n                            }\r\n                            self.data.list = ajaxData.data.list || [];\r\n                        },\r\n                        complete: function () {\r\n                            self.config.isSendAjax = false;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            Bestone.ui.ddSetRight({\r\n                control: true,\r\n                text: '日志',\r\n                show: true,\r\n                onSuccess: function () {\r\n                    Bestone.util.vueJump({\r\n                        path: '/log/userLog',\r\n                        query: {\r\n                            UserId: Bestone.user.id,\r\n                            isSelf: true\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // 数据滚动加载\r\n            Bestone.util.scrollRefresh({\r\n                callback: function (height) {\r\n                    if(self.config.isSendFirst && !self.config.isSendAjax && !self.config.isLoadAll) {\r\n                        self.config.isSendAjax = true;\r\n                        Bestone.util.ajax({\r\n                            url: 'api/UserManage/GetMenuUserConfigAllByUser',\r\n                            showLoad: false,\r\n                            data: JSON.stringify({\r\n                                PageIndex: self.config.pageIndex + 1,\r\n                                PageSize: self.config.pageSize,\r\n                                Keyword: self.config.searchAjaxVal,\r\n                                UserId: Bestone.user.id\r\n                            }),\r\n                            success: function (ajaxData) {\r\n                                if(ajaxData.data.list.length<self.config.pageSize) {\r\n                                    self.config.isLoadAll = true;\r\n                                }\r\n                                self.config.pageIndex = ajaxData.data.page; // 更新pageIndex\r\n                                self.data.list.push(...ajaxData.data.list); // 更新树形数组\r\n                            },\r\n                            complete: function () {\r\n                                self.config.isSendAjax = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        deactivated: function () {\r\n            var self = this;\r\n            // 回退时清除数据\r\n            Bestone.util.resetData(function () {\r\n                self.data = initData().data;\r\n                self.config = initData().config;\r\n            });\r\n        },\r\n        methods: {\r\n            // 管理范围状态处理\r\n            textStatusDeal: function (str) {\r\n                return Bestone.util.textStatusDeal(str);\r\n            },\r\n            viewDetail: function (item) {\r\n                Bestone.util.vueJump({\r\n                    path: '/myPermissionMgmt/myPermissionDetail',\r\n                    query: {\r\n                        MenuCode: item.Menu_Code,\r\n                        MenuName: item.Menu_Name || '查看详细'\r\n                    }\r\n                });\r\n            },\r\n            // 申请权限\r\n            applyPermission: function () {\r\n                Bestone.util.vueJump({path: '/applyPermission/applyPermission'});\r\n            },\r\n            // 搜索点击\r\n            searchClickDeal: function (str) {\r\n                let self = this;\r\n                self.config.isSendAjax = true;\r\n                Bestone.util.ajax({\r\n                    url: 'api/UserManage/GetMenuUserConfigAllByUser',\r\n                    data: JSON.stringify({\r\n                        PageIndex: 1,\r\n                        PageSize: self.config.pageSize,\r\n                        Keyword: str,\r\n                        UserId: Bestone.user.id\r\n                    }),\r\n                    success: function (ajaxData) {\r\n                        self.config.searchAjaxVal = str;\r\n                        self.config.pageIndex = 1;\r\n                        self.config.isSendFirst = true;\r\n                        if(ajaxData.data.list.length<self.config.pageSize) {\r\n                            self.config.isLoadAll = true;\r\n                        }else {\r\n                            self.config.isLoadAll = false;\r\n                        }\r\n                        self.data.list = ajaxData.data.list || [];\r\n                    },\r\n                    complete: function () {\r\n                        self.config.isSendAjax = false;\r\n                    }\r\n                });\r\n            },\r\n            // 输入框值改变\r\n            searchValChangeDeal: function (str) {\r\n                this.config.searchBox.searchVal=str; // 必须，用于父子组件数据双向绑定\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    #my-permission-mgmt {\r\n        padding-top: 10px;\r\n        & > .search {\r\n            background-color: #fff;\r\n            padding: 10px 15px;\r\n        }\r\n        & > .list {\r\n            padding: 0px 10px;\r\n            & > ul {\r\n                & > li {\r\n                    position: relative;\r\n                    background-color: #fff;\r\n                    border-radius: 5px;\r\n                    padding: 10px 95px 10px 10px;\r\n                    margin-top: 10px;\r\n                    overflow: hidden;\r\n                    font-size: 12px;\r\n                    & > .list-text {\r\n                        & > p {\r\n                            line-height: 20px;\r\n                            color: #404040;\r\n                            height: 20px;\r\n                            overflow: hidden;\r\n                            white-space: nowrap;\r\n                            text-overflow: ellipsis;\r\n                        }\r\n                    }\r\n                    & > .view-detail-btn {\r\n                        position: absolute;\r\n                        top: 15px;\r\n                        right: 10px;\r\n                        cursor: pointer;\r\n                        width: 73px;\r\n                        height: 28px;\r\n                        border: solid 1px #38ADFF;\r\n                        color: #38ADFF;\r\n                        line-height: 28px;\r\n                        text-align: center;\r\n                        border-radius: 3px;\r\n                        user-select: none;\r\n                        &:active {\r\n                            background-color: #ddd;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        & > .no-data {\r\n            color: #999;\r\n            font-size: 12px;\r\n            line-height: 20px;\r\n            text-align: center;\r\n            margin-top: 50px;\r\n            padding: 0px 20px;\r\n            & > span {\r\n                color: #38ADFF;\r\n            }\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// myPermissionMgmt.vue?f2fa9ed6","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#my-permission-mgmt[data-v-7f24f319]{padding-top:10px}#my-permission-mgmt>.search[data-v-7f24f319]{background-color:#fff;padding:10px 15px}#my-permission-mgmt>.list[data-v-7f24f319]{padding:0 10px}#my-permission-mgmt>.list>ul>li[data-v-7f24f319]{position:relative;background-color:#fff;border-radius:5px;padding:10px 95px 10px 10px;margin-top:10px;overflow:hidden;font-size:12px}#my-permission-mgmt>.list>ul>li>.list-text>p[data-v-7f24f319]{line-height:20px;color:#404040;height:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#my-permission-mgmt>.list>ul>li>.view-detail-btn[data-v-7f24f319]{position:absolute;top:15px;right:10px;cursor:pointer;width:73px;height:28px;border:1px solid #38adff;color:#38adff;line-height:28px;text-align:center;border-radius:3px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#my-permission-mgmt>.list>ul>li>.view-detail-btn[data-v-7f24f319]:active{background-color:#ddd}#my-permission-mgmt>.no-data[data-v-7f24f319]{color:#999;font-size:12px;line-height:20px;text-align:center;margin-top:50px;padding:0 20px}#my-permission-mgmt>.no-data>span[data-v-7f24f319]{color:#38adff}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7f24f319\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/myPermissionMgmt/myPermissionMgmt.vue\n// module id = 142\n// module chunks = 18","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"my-permission-mgmt\"\n    }\n  }, [_c('div', {\n    staticClass: \"search\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"ui ui-title\"\n  }, [_c('p', {\n    staticClass: \"omit\"\n  }, [_vm._v(\"你拥有的TDS业支端权限\")]), _vm._v(\" \"), _c('v-touch', {\n    staticClass: \"right-btn\",\n    attrs: {\n      \"tag\": \"a\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      }\n    }\n  }, [_vm._v(\"去申请\"), _c('i', {\n    staticClass: \"iconfont icon-you\"\n  })])], 1), _vm._v(\" \"), (_vm.data.list && _vm.data.list.length > 0) ? [_c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.data.list), function(item, index) {\n    return _c('li', [_c('div', {\n      staticClass: \"list-text\"\n    }, [_c('p', [_vm._v(\"权限名称：\" + _vm._s(_vm.textStatusDeal(item.Menu_Name)))]), _vm._v(\" \"), _c('p', [_vm._v(\"管理范围：\" + _vm._s(_vm.textStatusDeal(item.Branch_Name)))])]), _vm._v(\" \"), _c('v-touch', {\n      staticClass: \"view-detail-btn\",\n      attrs: {\n        \"tag\": \"div\"\n      },\n      on: {\n        \"pressup\": function($event) {\n          $event.preventDefault();\n          _vm.viewDetail(item, index)\n        },\n        \"tap\": function($event) {\n          $event.preventDefault();\n          _vm.viewDetail(item, index)\n        }\n      }\n    }, [_vm._v(\"查看详细\")])], 1)\n  }))])] : _vm._e(), _vm._v(\" \"), (_vm.data.list && _vm.data.list.length <= 0) ? _c('div', {\n    staticClass: \"no-data\"\n  }, [_vm._v(\"你还没有该权限，\"), _c('br'), _vm._v(\"点击右上方\"), _c('span', [_vm._v(\"去申请\")]), _vm._v(\"按钮申请\")]) : _vm._e(), _vm._v(\" \"), (_vm.data.list.length > 0) ? _c('div', {\n    staticClass: \"ui ui-scrollRefresh\"\n  }, [(!_vm.config.isLoadAll) ? [_c('i', {\n    staticClass: \"iconfont icon-load\"\n  }), _c('span', [_vm._v(\"加载中\")])] : _vm._e(), _vm._v(\" \"), (_vm.config.isLoadAll) ? [_c('span', [_vm._v(\"没有更多了\")])] : _vm._e()], 2) : _vm._e(), _vm._v(\" \"), (false) ? _c('div', {\n    staticClass: \"ui ui-bottom-btn\"\n  }, [_c('v-touch', {\n    staticClass: \"btn\",\n    attrs: {\n      \"tag\": \"div\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.applyPermission($event)\n      }\n    }\n  }, [_vm._v(\"申请权限\")])], 1) : _vm._e()], 2)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-7f24f319\",\"hasScoped\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/component/myPermissionMgmt/myPermissionMgmt.vue\n// module id = 175\n// module chunks = 18","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7f24f319\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./myPermissionMgmt.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"f8120d52\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7f24f319\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/myPermissionMgmt/myPermissionMgmt.vue\n// module id = 206\n// module chunks = 18","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7f24f319\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./myPermissionMgmt.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./myPermissionMgmt.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7f24f319\\\",\\\"hasScoped\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./myPermissionMgmt.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-7f24f319\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/myPermissionMgmt/myPermissionMgmt.vue\n// module id = 70\n// module chunks = 18"],"sourceRoot":""}