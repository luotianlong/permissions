webpackJsonp([2],{117:function(e,a,t){"use strict";function i(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){return{data:{list:[]},config:{pageIndex:1,pageSize:10,isLoadAll:!1,isSendAjax:!1,isFirstAjax:!0,searchAjaxVal:"",searchBox:{searchVal:"",placeholder:"登录账号/姓名搜索"},needOper:{item:{},index:0},modalBox:{isShow:!1,content:"",btn:[{text:"确定",handel:"confirmClick"},{text:"取消",handel:"cancelClick"}]}}}};a.default={data:function(){return new n},activated:function(){var e=this;Bestone.ui.pageInit({setTitle:"设置“配置管理员”",reviewCallBack:function(){e.config.isSendAjax=!0,Bestone.util.ajax({url:"api/AuthManage/GetUserWithRoleWhiteList",data:JSON.stringify({PageIndex:1,PageSize:e.config.pageSize,Keyword:e.config.searchAjaxVal}),success:function(a){e.config.isFirstAjax=!1,e.data.list=a.data.list||[],a.data.list.length<e.config.pageSize&&(e.config.isLoadAll=!0)},complete:function(){e.config.isSendAjax=!1}})}}),Bestone.util.scrollRefresh({callback:function(a){e.config.isFirstAjax||e.config.isSendAjax||e.config.isLoadAll||(e.config.isSendAjax=!0,Bestone.util.ajax({url:"api/AuthManage/GetUserWithRoleWhiteList",showLoad:!1,data:JSON.stringify({PageIndex:e.config.pageIndex+1,PageSize:e.config.pageSize,Keyword:e.config.searchAjaxVal}),success:function(a){var t;a.data.list.length<e.config.pageSize&&(e.config.isLoadAll=!0),e.config.pageIndex=a.data.page,(t=e.data.list).push.apply(t,i(a.data.list))},complete:function(){e.config.isSendAjax=!1}}))}})},deactivated:function(){var e=this;Bestone.util.resetData(function(){e.data=n().data,e.config=n().config})},methods:{textStatusDeal:function(e){return Bestone.util.textStatusDeal(e)},changePermission:function(e,a){var t=this,i="";t.config.needOper.item=e,t.config.needOper.index=a,i=200==e.Status?"移除":"添加",t.config.modalBox.content='<p style="font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;">确定'+i+' <span style="color: #23A4FF;">'+e.User_UserName+"</span> 的权限？</p>",t.config.modalBox.isShow=!0},confirmClickDeal:function(){var e=this,a=e.config.needOper.item,t=e.config.needOper.index;200==a.Status?Bestone.util.ajax({url:"api/AuthManage/DeleteRoleWhiteList",data:JSON.stringify({UserId:a.User_ID,OperId:Bestone.user.id,OperName:Bestone.user.name}),success:function(i){Bestone.ui.message({content:"移除成功"}),e.config.modalBox.isShow=!1;var n=a;n.Status=400,e.data.list.splice(t,1,n)}}):Bestone.util.ajax({url:"api/AuthManage/AddRoleWhiteList",data:JSON.stringify({UserId:a.User_ID,OperId:Bestone.user.id,OperName:Bestone.user.name}),success:function(i){Bestone.ui.message({content:"添加成功"}),e.config.modalBox.isShow=!1;var n=a;n.Status=200,e.data.list.splice(t,1,n)}})},cancelClickDeal:function(){this.config.modalBox.isShow=!1},searchClickDeal:function(e){var a=this;a.config.isSendAjax=!0,Bestone.util.ajax({url:"api/AuthManage/GetUserWithRoleWhiteList",data:JSON.stringify({PageIndex:1,PageSize:a.config.pageSize,Keyword:e}),success:function(t){a.config.isFirstAjax=!1,a.config.searchAjaxVal=e,a.config.pageIndex=1,t.data.list.length<a.config.pageSize?a.config.isLoadAll=!0:a.config.isLoadAll=!1,a.data.list=t.data.list||[]},complete:function(){a.config.isSendAjax=!1}})},searchValChangeDeal:function(e){this.config.searchBox.searchVal=e}}}},144:function(e,a,t){a=e.exports=t(0)(void 0),a.push([e.i,"#set-config-admin[data-v-dce60fbc]{padding-top:10px}#set-config-admin>.search[data-v-dce60fbc]{background-color:#fff;padding:10px 15px}",""])},177:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{attrs:{id:"set-config-admin"}},[t("div",{staticClass:"search"},[t("search-box",{attrs:{searchVal:e.config.searchBox.searchVal,placeholder:e.config.searchBox.placeholder},on:{searchClick:e.searchClickDeal,searchValChange:e.searchValChangeDeal}})],1),e._v(" "),t("div",{staticClass:"ui ui-card-list"},[e.data.list&&e.data.list.length>0?t("ul",e._l(e.data.list,function(a,i){return t("li",[t("div",{staticClass:"list-text"},[t("p",[e._v("TDS账号："+e._s(a.User_Name))]),e._v(" "),t("p",[e._v("姓名："+e._s(a.User_UserName))]),e._v(" "),t("p",[e._v("账号所属公司："+e._s(a.Branch_Name))])]),e._v(" "),t("v-touch",{staticClass:"btn",class:200==a.Status?"red":"",attrs:{tag:"div"},on:{pressup:function(t){t.preventDefault(),e.changePermission(a,i)},tap:function(t){t.preventDefault(),e.changePermission(a,i)}}},[e._v(e._s(200==a.Status?"移除权限":"添加权限"))])],1)})):e._e(),e._v(" "),e.data.list&&e.data.list.length<=0?t("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e()]),e._v(" "),e.data.list.length>0?t("div",{staticClass:"ui ui-scrollRefresh"},[e.config.isLoadAll?e._e():[t("i",{staticClass:"iconfont icon-load"}),t("span",[e._v("加载中")])],e._v(" "),e.config.isLoadAll?[t("span",[e._v("没有更多了")])]:e._e()],2):e._e(),e._v(" "),t("modal-box",{attrs:{setConfig:e.config.modalBox},on:{confirmClick:e.confirmClickDeal,cancelClick:e.cancelClickDeal}})],1)])},staticRenderFns:[]}},208:function(e,a,t){var i=t(144);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(2)("a35388f2",i,!0)},86:function(e,a,t){function i(e){t(208)}var n=t(1)(t(117),t(177),i,"data-v-dce60fbc",null);e.exports=n.exports}});