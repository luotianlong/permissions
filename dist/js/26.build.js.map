{"version":3,"sources":["webpack:///js/26.build.js","webpack:///./src/component/applyPermission/applyPermission.vue?446f","webpack:///./src/component/applyPermission/applyPermission.vue?6118","webpack:///./src/component/applyPermission/applyPermission.vue?9a2b","webpack:///./src/component/applyPermission/applyPermission.vue","webpack:///applyPermission.vue"],"names":["webpackJsonp","122","module","exports","__webpack_require__","undefined","push","i","155","render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","config","isProxy","_e","_v","_s","userInfo","user","name","branchName","proxyUserInfo","defaultVal","selectBox","dropDownData","on","selectClick","selectChoiceId","_m","searchVal","searchBox","placeholder","suggest","searchClick","searchClickDeal","searchValChange","searchValChangeDeal","itemClick","itemClickDeal","dataArr","data","treeView","setConfig","addDirect","addDirectDeal","addCustom","addCustomDeal","length","staticStyle","margin-top","directives","rawName","value","expression","domProps","input","$event","target","composing","explainValue","tdsLoginShow","tdsLoginModal","getCode","getCodeDeal","submit","submitDeal","staticRenderFns","background-color","186","content","locals","61","injectStyle","ssrContext","Component","92","__webpack_exports__","Object","defineProperty","initData","chose","msgType","getCodeBtnText","submitBtnText","prompt","warn","isShow","isShowIcon","keyConfig","childKey","btn","iconFontClass","color","handle","locationConfig","key","activated","self","Bestone","ui","pageInit","setTitle","reviewCallBack","util","resetApplyData","query","ProxyApply","ajax","url","JSON","stringify","success","ajaxData","selectData","$","each","k","v","Id","RoleName","ddSetRight","control","text","applyData","MenuArr","show","onSuccess","submitApply","deactivated","resetData","methods","message","ApplyDesc","vueJump","path","accountName","businessType","phone","PhoneNum","omitPhone","substr","typeText","fail","obj","accountVal","code","verifyCode","ProxyApplyUserId","UserId","ProxyApplyUserAccount","AccountName","ProxyApplyUserName","UserName","ProxyApplyBranchId","BranchId","ProxyApplyBranchName","BranchName","item","RoleId","getTreeViewDataForSearch","frontNoShowBtn","str","val","$loca","css","setTimeout","window","scrollTop","offset","top","isActived","userBranchId","userBranchName","branchId","newMenuItem","MenuID","MenuId","BranchIds","MenuBusinessType","ButtonIds","MenuName","BranchNames","ButtonNames","splice"],"mappings":"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","file":"js/26.build.js?d8dce750","sourcesContent":["webpackJsonp([26],{\n\n/***/ 122:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#apply-permission[data-v-15be1195]{padding-top:10px;padding-bottom:10px;font-size:14px;color:#404040}#apply-permission>.choice-permission[data-v-15be1195]{margin-top:10px}#apply-permission>.choice-permission>.choice-department[data-v-15be1195],#apply-permission>.search-content[data-v-15be1195]{padding:10px 15px;background-color:#fff}#apply-permission>.explain-content[data-v-15be1195]{padding:0 15px}#apply-permission>.tree-view-content[data-v-15be1195]{margin-top:10px;margin-bottom:10px}#apply-permission>.explain[data-v-15be1195]{padding:10px 15px;background-color:#fff;margin-top:10px}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 155:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"apply-permission\"\n    }\n  }, [_c('div', {\n    staticClass: \"ui ui-text-list\"\n  }, [(!_vm.config.isProxy) ? [_c('p', [_vm._v(\"申请权限账号：\" + _vm._s(_vm.config.userInfo.user))]), _vm._v(\" \"), _c('p', [_vm._v(\"姓名：\" + _vm._s(_vm.config.userInfo.name))]), _vm._v(\" \"), _c('p', [_vm._v(\"账号所属公司：\" + _vm._s(_vm.config.userInfo.branchName))])] : _vm._e(), _vm._v(\" \"), (_vm.config.isProxy) ? [(false) ? _c('p', [_vm._v(\"申请账号：\" + _vm._s(_vm.config.proxyUserInfo.user))]) : _vm._e(), _vm._v(\" \"), _c('p', [_vm._v(\"申请人：\" + _vm._s(_vm.config.proxyUserInfo.name))]), _vm._v(\" \"), _c('p', [_vm._v(\"代办人：\" + _vm._s(_vm.config.userInfo.name))])] : _vm._e()], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"choice-permission\"\n  }, [_c('div', {\n    staticClass: \"ui ui-title\"\n  }, [_vm._v(\"选择权限\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"choice-department\"\n  }, [_c('select-box', {\n    attrs: {\n      \"defaultVal\": _vm.config.selectBox.defaultVal,\n      \"dropDownData\": _vm.config.selectBox.dropDownData\n    },\n    on: {\n      \"selectClick\": _vm.selectClick\n    }\n  })], 1)]), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"explain-content\"\n  }, [_vm._m(0)]) : _vm._e(), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"search-content\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder,\n      \"suggest\": _vm.config.searchBox.suggest\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal,\n      \"itemClick\": _vm.itemClickDeal\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"tree-view-content\"\n  }, [_c('tree-view', {\n    attrs: {\n      \"dataArr\": _vm.data.treeView,\n      \"setConfig\": _vm.config.treeView\n    },\n    on: {\n      \"addDirect\": _vm.addDirectDeal,\n      \"addCustom\": _vm.addCustomDeal\n    }\n  }), _vm._v(\" \"), (_vm.data.treeView && _vm.data.treeView.length <= 0) ? _c('div', {\n    staticClass: \"ui no-data\",\n    staticStyle: {\n      \"margin-top\": \"0px\"\n    }\n  }, [_vm._v(\"暂无数据\")]) : _vm._e()], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"explain\"\n  }, [_c('div', {\n    staticClass: \"ui ui-textarea\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.config.explainValue),\n      expression: \"config.explainValue\"\n    }],\n    attrs: {\n      \"placeholder\": \"申请权限说明（选填）\"\n    },\n    domProps: {\n      \"value\": (_vm.config.explainValue)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.config.explainValue = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), (false) ? _c('div', {\n    staticClass: \"ui ui-bottom-btn\"\n  }, [_c('v-touch', {\n    staticClass: \"btn\",\n    attrs: {\n      \"tag\": \"div\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.submitApply($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.submitApply($event)\n      }\n    }\n  }, [_vm._v(\"已选择（\" + _vm._s(_vm.config.chose) + \"），下一步\")])], 1) : _vm._e(), _vm._v(\" \"), (_vm.config.isProxy && _vm.config.tdsLoginShow) ? _c('tds-login-modal', {\n    attrs: {\n      \"setConfig\": _vm.config.tdsLoginModal\n    },\n    on: {\n      \"getCode\": _vm.getCodeDeal,\n      \"submit\": _vm.submitDeal\n    }\n  }) : _vm._e()], 1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"ui ui-icon-explain\"\n  }, [_c('div', {\n    staticClass: \"title\"\n  }, [_vm._v(\"图例：\")]), _vm._v(\" \"), _c('ul', [_c('li', [_c('div', {\n    staticClass: \"icon-content\",\n    staticStyle: {\n      \"background-color\": \"#E5B626\"\n    }\n  }, [_c('i', {\n    staticClass: \"iconfont icon-jia\"\n  })]), _vm._v(\" \"), _c('span', [_vm._v(\"按所属公司添加权限范围\")])]), _vm._v(\" \"), _c('li', [_c('div', {\n    staticClass: \"icon-content\",\n    staticStyle: {\n      \"background-color\": \"#22AC38\"\n    }\n  }, [_c('i', {\n    staticClass: \"iconfont icon-tubiaozhizuomoban-\"\n  })]), _vm._v(\" \"), _c('span', [_vm._v(\"自定义选择权限管理范围\")])])])])\n}]}\n\n/***/ }),\n\n/***/ 186:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(122);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"211be441\", content, true);\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(186)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(92),\n  /* template */\n  __webpack_require__(155),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-15be1195\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 92:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar initData = function initData() {\n    return {\n        data: {\n            treeView: []\n        },\n        config: {\n            isProxy: false, // 是否代为申请\n            tdsLoginShow: false, // 代为申请登录框是否展示\n            chose: 0, // 已经选择的菜单数\n            msgType: 1, // 验证码类型 1-短信 2-语音\n            userInfo: {\n                user: '',\n                name: '',\n                branchName: ''\n            }, // 用户信息\n            proxyUserInfo: {\n                user: '',\n                name: ''\n            }, // 代为申请人信息\n            tdsLoginModal: {\n                getCodeBtnText: '获取短信验证码',\n                submitBtnText: '代为申请权限账号授权',\n                prompt: '',\n                warn: ''\n            }, // 登录配置\n            selectBox: {\n                defaultVal: '请选择部门权限',\n                dropDownData: []\n            },\n            searchBox: {\n                searchVal: '',\n                placeholder: '权限名称',\n                suggest: {\n                    isShow: 1,\n                    data: []\n                }\n            },\n            treeView: {\n                isShow: 1,\n                isShowIcon: 2,\n                keyConfig: {\n                    name: 'MenuName',\n                    id: 'MenuId',\n                    childKey: 'ChildList'\n                },\n                btn: [{\n                    iconFontClass: 'icon-tubiaozhizuomoban-',\n                    color: '#22AC38',\n                    handle: 'addCustom'\n                }, {\n                    iconFontClass: 'icon-jia',\n                    color: '#E5B626',\n                    handle: 'addDirect'\n                }],\n                locationConfig: {\n                    key: 'id'\n                }\n            },\n            selectChoiceId: '', // 选择的部门id\n            explainValue: '' // 申请权限说明\n        }\n    };\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return new initData();\n    },\n\n    activated: function activated() {\n        var self = this;\n        Bestone.ui.pageInit({\n            setTitle: '申请权限',\n            reviewCallBack: function reviewCallBack() {\n                self.data = initData().data;\n                self.config = initData().config;\n                // 重置申请权限全局数据\n                Bestone.util.resetApplyData();\n\n                // 判断是否代为申请\n                if (!!Bestone.util.query().ProxyApply) {\n                    self.config.isProxy = true;\n                    self.config.tdsLoginShow = true;\n                }\n                // 获取用户信息\n                self.config.userInfo.user = Bestone.user.user;\n                self.config.userInfo.name = Bestone.user.name;\n                self.config.userInfo.branchName = Bestone.user.branchName;\n\n                // 获取所有权限部门\n                Bestone.util.ajax({\n                    url: 'api/PermissionManage/GetAllRoleGroup',\n                    data: JSON.stringify({}),\n                    success: function success(ajaxData) {\n                        var selectData = [];\n                        $.each(ajaxData.data, function (k, v) {\n                            selectData.push({\n                                id: v.Id,\n                                name: v.RoleName\n                            });\n                        });\n                        self.config.selectBox.dropDownData = selectData;\n                    }\n                });\n            }\n        });\n\n        Bestone.ui.ddSetRight({\n            control: true,\n            text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\n            show: true,\n            onSuccess: function onSuccess() {\n                self.submitApply();\n            }\n        });\n\n        // 获取当前已选菜单数\n        self.config.chose = Bestone.applyData.MenuArr.length;\n    },\n    deactivated: function deactivated() {\n        var self = this;\n        // 回退时清除数据\n        Bestone.util.resetData(function () {\n            self.data = initData().data;\n            self.config = initData().config;\n            // 重置申请权限全局数据\n            Bestone.util.resetApplyData();\n        });\n    },\n    methods: {\n        submitApply: function submitApply() {\n            var self = this;\n            // 判断是否选择门市\n            if (Bestone.applyData.MenuArr.length <= 0) {\n                Bestone.ui.message({\n                    content: '请先选择'\n                });\n                return;\n            }\n            Bestone.applyData.ApplyDesc = self.config.explainValue;\n            Bestone.util.vueJump({\n                path: '/applyPermission/finalCheck'\n            });\n        },\n        // 获取验证码\n        getCodeDeal: function getCodeDeal(accountName) {\n            var self = this;\n\n            Bestone.util.ajax({\n                url: 'api/DingTalk/SendMessage',\n                data: JSON.stringify({\n                    accountName: accountName,\n                    msgType: self.config.msgType, // 1-短信 2-语音\n                    businessType: 2 // 1-登陆 2-代为申请授权\n                }),\n                success: function success(ajaxData) {\n                    var phone = ajaxData.data.PhoneNum;\n                    var omitPhone = phone.substr(0, 4) + '****' + phone.substr(phone.length - 3, phone.length);\n                    var typeText = '';\n                    if (self.config.msgType === 1) {\n                        typeText = '文字短信';\n                    } else {\n                        typeText = '语音口令';\n                    }\n                    self.config.tdsLoginModal.prompt = '你的手机' + omitPhone + '将会收到一条' + typeText + '，请注意查收！';\n                },\n                fail: function fail() {\n                    self.config.msgType = 2;\n                    self.config.tdsLoginModal.getCodeBtnText = '发送语音口令';\n                }\n            });\n        },\n        // 代为提交\n        submitDeal: function submitDeal(obj) {\n            var self = this;\n\n            Bestone.util.ajax({\n                url: 'api/DingTalk/AuthProxy',\n                data: JSON.stringify({\n                    accountName: obj.accountVal,\n                    code: obj.verifyCode\n                }),\n                success: function success(ajaxData) {\n                    ajaxData = ajaxData.data;\n                    self.config.tdsLoginShow = false;\n\n                    // 写入代为申请用户信息\n                    Bestone.applyData.ProxyApplyUserId = ajaxData.UserId;\n                    Bestone.applyData.ProxyApplyUserAccount = ajaxData.AccountName;\n                    Bestone.applyData.ProxyApplyUserName = ajaxData.UserName;\n                    Bestone.applyData.ProxyApplyBranchId = ajaxData.BranchId;\n                    Bestone.applyData.ProxyApplyBranchName = ajaxData.BranchName;\n                    // 获取代为用户信息\n                    self.config.proxyUserInfo.user = Bestone.applyData.ProxyApplyUserAccount;\n                    self.config.proxyUserInfo.name = Bestone.applyData.ProxyApplyUserName;\n                }\n            });\n        },\n        // 下拉框点击\n        selectClick: function selectClick(item) {\n            var self = this;\n            // 重置申请权限全局数据\n            Bestone.applyData.RoleId = 0;\n            Bestone.applyData.MenuArr = [];\n            // 获取当前已选菜单数\n            self.config.chose = Bestone.applyData.MenuArr.length;\n            Bestone.ui.ddSetRight({\n                control: true,\n                text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\n                show: true,\n                onSuccess: function onSuccess() {\n                    self.submitApply();\n                }\n            });\n            self.config.selectChoiceId = item.id;\n            Bestone.applyData.RoleId = item.id;\n\n            // 获取权限部门下所有菜单\n            Bestone.util.ajax({\n                url: 'api/AuthManage/GetRoleMenus',\n                data: JSON.stringify({\n                    RoleId: self.config.selectChoiceId\n                }),\n                success: function success(ajaxData) {\n                    self.config.searchBox.suggest.data = Bestone.util.getTreeViewDataForSearch({\n                        data: ajaxData.data,\n                        name: 'MenuName',\n                        id: 'MenuId',\n                        childKey: 'ChildList'\n                    });\n                    // 一级不展示按钮\n                    $.each(ajaxData.data, function (k, v) {\n                        v.frontNoShowBtn = ['addCustom', 'addDirect'];\n                    });\n                    self.data.treeView = ajaxData.data;\n                }\n            });\n        },\n        // 搜索点击\n        searchClickDeal: function searchClickDeal(str) {\n            Bestone.ui.message({\n                content: '仅支持智能匹配搜索'\n            });\n        },\n        // 输入框值改变\n        searchValChangeDeal: function searchValChangeDeal(str) {\n            this.config.searchBox.searchVal = str; // 必须，用于父子组件数据双向绑定\n        },\n        // 搜索下拉框点击\n        itemClickDeal: function itemClickDeal(item) {\n            var val = item.id;\n            if (!!val) {\n                var $loca = $('.ui.tree-view .loca' + val);\n                $('.ui.tree-view .item').css('background-color', 'transparent');\n                if ($loca.length > 0) {\n                    setTimeout(function () {\n                        $loca.css('background-color', '#FFFBE6');\n                        $(window).scrollTop($loca.offset().top - 5);\n                    }, 100);\n                }\n            }\n        },\n        // 按所属公司添加范围\n        addDirectDeal: function addDirectDeal(item) {\n            var self = this;\n            var isActived = false; // 是否已编辑\n            var userBranchId = 0; // 获得权限人的机构id\n            var userBranchName = ''; // 获得权限人的机构名称\n            if (!self.config.isProxy) {\n                // 不是代为申请\n                userBranchId = Bestone.user.branchId;\n                userBranchName = Bestone.user.branchName;\n            } else {\n                // 是代为申请\n                userBranchId = Bestone.applyData.ProxyApplyBranchId;\n                userBranchName = Bestone.applyData.ProxyApplyBranchName;\n            }\n            var newMenuItem = {\n                MenuID: item.MenuId,\n                BranchIds: item.MenuBusinessType !== '' ? [userBranchId] : [], //item.MenuBusinessType 为空字符串不可选范围\n                ButtonIds: [],\n                MenuName: item.MenuName,\n                BranchNames: item.MenuBusinessType !== '' ? [userBranchName] : [],\n                ButtonNames: []\n            };\n            $.each(Bestone.applyData.MenuArr, function (k, v) {\n                if (v.MenuID == item.MenuId) {\n                    Bestone.applyData.MenuArr.splice(k, 1, newMenuItem);\n                    isActived = true;\n                    return false;\n                }\n            });\n            if (!isActived) {\n                // 如果没有编辑则添加一条新的\n                Bestone.applyData.MenuArr.push(newMenuItem);\n            }\n            // 获取当前已选菜单数\n            self.config.chose = Bestone.applyData.MenuArr.length;\n            Bestone.ui.ddSetRight({\n                control: true,\n                text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\n                show: true,\n                onSuccess: function onSuccess() {\n                    self.submitApply();\n                }\n            });\n            Bestone.ui.message({\n                content: '添加成功'\n            });\n        },\n        // 自定义选择权限管理范围\n        addCustomDeal: function addCustomDeal(item) {\n            var self = this;\n            // item.MenuBusinessType  17,4,21-门市可选   ''-不可选范围\n            if (item.MenuBusinessType !== '') {\n                // 可选范围\n                Bestone.util.vueJump({\n                    path: '/applyPermission/mgmtLimit',\n                    query: {\n                        MenuId: item.MenuId,\n                        MenuName: item.MenuName,\n                        MenuBusinessType: item.MenuBusinessType\n                    }\n                });\n            } else {\n                // 不可选范围\n                var isActived = false; // 是否已编辑\n                var newMenuItem = {\n                    MenuID: item.MenuId,\n                    BranchIds: [],\n                    ButtonIds: [],\n                    MenuName: item.MenuName,\n                    BranchNames: [],\n                    ButtonNames: []\n                };\n                $.each(Bestone.applyData.MenuArr, function (k, v) {\n                    if (v.MenuID == item.MenuId) {\n                        Bestone.applyData.MenuArr.splice(k, 1, newMenuItem);\n                        isActived = true;\n                        return false;\n                    }\n                });\n                if (!isActived) {\n                    // 如果没有编辑则添加一条新的\n                    Bestone.applyData.MenuArr.push(newMenuItem);\n                }\n                // 获取当前已选菜单数\n                self.config.chose = Bestone.applyData.MenuArr.length;\n                Bestone.ui.ddSetRight({\n                    control: true,\n                    text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\n                    show: true,\n                    onSuccess: function onSuccess() {\n                        self.submitApply();\n                    }\n                });\n                Bestone.ui.message({\n                    content: '添加成功'\n                });\n            }\n        }\n    }\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/26.build.js?d8dce750","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#apply-permission[data-v-15be1195]{padding-top:10px;padding-bottom:10px;font-size:14px;color:#404040}#apply-permission>.choice-permission[data-v-15be1195]{margin-top:10px}#apply-permission>.choice-permission>.choice-department[data-v-15be1195],#apply-permission>.search-content[data-v-15be1195]{padding:10px 15px;background-color:#fff}#apply-permission>.explain-content[data-v-15be1195]{padding:0 15px}#apply-permission>.tree-view-content[data-v-15be1195]{margin-top:10px;margin-bottom:10px}#apply-permission>.explain[data-v-15be1195]{padding:10px 15px;background-color:#fff;margin-top:10px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-15be1195\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/applyPermission/applyPermission.vue\n// module id = 122\n// module chunks = 26","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"apply-permission\"\n    }\n  }, [_c('div', {\n    staticClass: \"ui ui-text-list\"\n  }, [(!_vm.config.isProxy) ? [_c('p', [_vm._v(\"申请权限账号：\" + _vm._s(_vm.config.userInfo.user))]), _vm._v(\" \"), _c('p', [_vm._v(\"姓名：\" + _vm._s(_vm.config.userInfo.name))]), _vm._v(\" \"), _c('p', [_vm._v(\"账号所属公司：\" + _vm._s(_vm.config.userInfo.branchName))])] : _vm._e(), _vm._v(\" \"), (_vm.config.isProxy) ? [(false) ? _c('p', [_vm._v(\"申请账号：\" + _vm._s(_vm.config.proxyUserInfo.user))]) : _vm._e(), _vm._v(\" \"), _c('p', [_vm._v(\"申请人：\" + _vm._s(_vm.config.proxyUserInfo.name))]), _vm._v(\" \"), _c('p', [_vm._v(\"代办人：\" + _vm._s(_vm.config.userInfo.name))])] : _vm._e()], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"choice-permission\"\n  }, [_c('div', {\n    staticClass: \"ui ui-title\"\n  }, [_vm._v(\"选择权限\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"choice-department\"\n  }, [_c('select-box', {\n    attrs: {\n      \"defaultVal\": _vm.config.selectBox.defaultVal,\n      \"dropDownData\": _vm.config.selectBox.dropDownData\n    },\n    on: {\n      \"selectClick\": _vm.selectClick\n    }\n  })], 1)]), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"explain-content\"\n  }, [_vm._m(0)]) : _vm._e(), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"search-content\"\n  }, [_c('search-box', {\n    attrs: {\n      \"searchVal\": _vm.config.searchBox.searchVal,\n      \"placeholder\": _vm.config.searchBox.placeholder,\n      \"suggest\": _vm.config.searchBox.suggest\n    },\n    on: {\n      \"searchClick\": _vm.searchClickDeal,\n      \"searchValChange\": _vm.searchValChangeDeal,\n      \"itemClick\": _vm.itemClickDeal\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.config.selectChoiceId !== '') ? _c('div', {\n    staticClass: \"tree-view-content\"\n  }, [_c('tree-view', {\n    attrs: {\n      \"dataArr\": _vm.data.treeView,\n      \"setConfig\": _vm.config.treeView\n    },\n    on: {\n      \"addDirect\": _vm.addDirectDeal,\n      \"addCustom\": _vm.addCustomDeal\n    }\n  }), _vm._v(\" \"), (_vm.data.treeView && _vm.data.treeView.length <= 0) ? _c('div', {\n    staticClass: \"ui no-data\",\n    staticStyle: {\n      \"margin-top\": \"0px\"\n    }\n  }, [_vm._v(\"暂无数据\")]) : _vm._e()], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"explain\"\n  }, [_c('div', {\n    staticClass: \"ui ui-textarea\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.config.explainValue),\n      expression: \"config.explainValue\"\n    }],\n    attrs: {\n      \"placeholder\": \"申请权限说明（选填）\"\n    },\n    domProps: {\n      \"value\": (_vm.config.explainValue)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.config.explainValue = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), (false) ? _c('div', {\n    staticClass: \"ui ui-bottom-btn\"\n  }, [_c('v-touch', {\n    staticClass: \"btn\",\n    attrs: {\n      \"tag\": \"div\"\n    },\n    on: {\n      \"pressup\": function($event) {\n        $event.preventDefault();\n        _vm.submitApply($event)\n      },\n      \"tap\": function($event) {\n        $event.preventDefault();\n        _vm.submitApply($event)\n      }\n    }\n  }, [_vm._v(\"已选择（\" + _vm._s(_vm.config.chose) + \"），下一步\")])], 1) : _vm._e(), _vm._v(\" \"), (_vm.config.isProxy && _vm.config.tdsLoginShow) ? _c('tds-login-modal', {\n    attrs: {\n      \"setConfig\": _vm.config.tdsLoginModal\n    },\n    on: {\n      \"getCode\": _vm.getCodeDeal,\n      \"submit\": _vm.submitDeal\n    }\n  }) : _vm._e()], 1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"ui ui-icon-explain\"\n  }, [_c('div', {\n    staticClass: \"title\"\n  }, [_vm._v(\"图例：\")]), _vm._v(\" \"), _c('ul', [_c('li', [_c('div', {\n    staticClass: \"icon-content\",\n    staticStyle: {\n      \"background-color\": \"#E5B626\"\n    }\n  }, [_c('i', {\n    staticClass: \"iconfont icon-jia\"\n  })]), _vm._v(\" \"), _c('span', [_vm._v(\"按所属公司添加权限范围\")])]), _vm._v(\" \"), _c('li', [_c('div', {\n    staticClass: \"icon-content\",\n    staticStyle: {\n      \"background-color\": \"#22AC38\"\n    }\n  }, [_c('i', {\n    staticClass: \"iconfont icon-tubiaozhizuomoban-\"\n  })]), _vm._v(\" \"), _c('span', [_vm._v(\"自定义选择权限管理范围\")])])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-15be1195\",\"hasScoped\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/component/applyPermission/applyPermission.vue\n// module id = 155\n// module chunks = 26","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15be1195\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./applyPermission.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"211be441\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.7@css-loader?minimize!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-15be1195\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/component/applyPermission/applyPermission.vue\n// module id = 186\n// module chunks = 26","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15be1195\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./applyPermission.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./applyPermission.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15be1195\\\",\\\"hasScoped\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./applyPermission.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-15be1195\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/applyPermission/applyPermission.vue\n// module id = 61\n// module chunks = 26","<!-- 申请权限 -->\r\n<template>\r\n    <div>\r\n        <div id=\"apply-permission\">\r\n            <div class=\"ui ui-text-list\">\r\n                <template v-if=\"!config.isProxy\">\r\n                    <p>申请权限账号：{{config.userInfo.user}}</p>\r\n                    <p>姓名：{{config.userInfo.name}}</p>\r\n                    <p>账号所属公司：{{config.userInfo.branchName}}</p>\r\n                </template>\r\n                <template v-if=\"config.isProxy\">\r\n                    <p v-if=\"false\">申请账号：{{config.proxyUserInfo.user}}</p>\r\n                    <p>申请人：{{config.proxyUserInfo.name}}</p>\r\n                    <p>代办人：{{config.userInfo.name}}</p>\r\n                </template>\r\n            </div>\r\n            <div class=\"choice-permission\">\r\n                <div class=\"ui ui-title\">选择权限</div>\r\n                <div class=\"choice-department\">\r\n                    <select-box :defaultVal=\"config.selectBox.defaultVal\" :dropDownData=\"config.selectBox.dropDownData\" @selectClick=\"selectClick\"></select-box>\r\n                </div>\r\n            </div>\r\n            <div class=\"explain-content\" v-if=\"config.selectChoiceId !== ''\">\r\n                <div class=\"ui ui-icon-explain\">\r\n                    <div class=\"title\">图例：</div>\r\n                    <ul>\r\n                        <li>\r\n                            <div class=\"icon-content\" style=\"background-color: #E5B626;\"><i class=\"iconfont icon-jia\"></i></div>\r\n                            <span>按所属公司添加权限范围</span></li>\r\n                        <li>\r\n                            <div class=\"icon-content\" style=\"background-color: #22AC38;\"><i class=\"iconfont icon-tubiaozhizuomoban-\"></i></div>\r\n                            <span>自定义选择权限管理范围</span></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"search-content\" v-if=\"config.selectChoiceId !== ''\">\r\n                <search-box :searchVal=\"config.searchBox.searchVal\" :placeholder=\"config.searchBox.placeholder\" :suggest=\"config.searchBox.suggest\" @searchClick=\"searchClickDeal\" @searchValChange=\"searchValChangeDeal\" @itemClick=\"itemClickDeal\"></search-box>\r\n            </div>\r\n            <div class=\"tree-view-content\" v-if=\"config.selectChoiceId !== ''\">\r\n                <tree-view :dataArr=\"data.treeView\" :setConfig=\"config.treeView\" @addDirect=\"addDirectDeal\" @addCustom=\"addCustomDeal\"></tree-view>\r\n                <div v-if=\"data.treeView && data.treeView.length<=0\" class=\"ui no-data\" style=\"margin-top: 0px;\">暂无数据</div>\r\n            </div>\r\n            <div class=\"explain\">\r\n                <div class=\"ui ui-textarea\">\r\n                    <textarea placeholder=\"申请权限说明（选填）\" v-model=\"config.explainValue\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div v-if=\"false\" class=\"ui ui-bottom-btn\">\r\n                <v-touch tag=\"div\" class=\"btn\" @pressup.prevent=\"submitApply\" @tap.prevent=\"submitApply\">已选择（{{config.chose}}），下一步</v-touch>\r\n            </div>\r\n            <tds-login-modal v-if=\"config.isProxy && config.tdsLoginShow\" :setConfig=\"config.tdsLoginModal\" @getCode=\"getCodeDeal\" @submit=\"submitDeal\"></tds-login-modal>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script scoped>\r\n    var initData = function () {\r\n        return {\r\n            data: {\r\n                treeView: []\r\n            },\r\n            config: {\r\n                isProxy: false, // 是否代为申请\r\n                tdsLoginShow: false, // 代为申请登录框是否展示\r\n                chose: 0, // 已经选择的菜单数\r\n                msgType: 1, // 验证码类型 1-短信 2-语音\r\n                userInfo: {\r\n                    user: '',\r\n                    name: '',\r\n                    branchName: ''\r\n                }, // 用户信息\r\n                proxyUserInfo: {\r\n                    user: '',\r\n                    name: ''\r\n                }, // 代为申请人信息\r\n                tdsLoginModal: {\r\n                    getCodeBtnText: '获取短信验证码',\r\n                    submitBtnText: '代为申请权限账号授权',\r\n                    prompt: '',\r\n                    warn: ''\r\n                }, // 登录配置\r\n                selectBox: {\r\n                    defaultVal: '请选择部门权限',\r\n                    dropDownData: []\r\n                },\r\n                searchBox: {\r\n                    searchVal: '',\r\n                    placeholder: '权限名称',\r\n                    suggest: {\r\n                        isShow: 1,\r\n                        data: [],\r\n                    }\r\n                },\r\n                treeView: {\r\n                    isShow: 1,\r\n                    isShowIcon: 2,\r\n                    keyConfig: {\r\n                        name: 'MenuName',\r\n                        id: 'MenuId',\r\n                        childKey: 'ChildList'\r\n                    },\r\n                    btn: [{\r\n                        iconFontClass: 'icon-tubiaozhizuomoban-',\r\n                        color: '#22AC38',\r\n                        handle: 'addCustom'\r\n                    }, {\r\n                        iconFontClass: 'icon-jia',\r\n                        color: '#E5B626',\r\n                        handle: 'addDirect'\r\n                    }],\r\n                    locationConfig: {\r\n                        key: 'id'\r\n                    }\r\n                },\r\n                selectChoiceId: '', // 选择的部门id\r\n                explainValue: '', // 申请权限说明\r\n            }\r\n        }\r\n    };\r\n    export default {\r\n        data() {\r\n            return new initData();\r\n        },\r\n        activated: function () {\r\n            let self = this;\r\n            Bestone.ui.pageInit({\r\n                setTitle: '申请权限',\r\n                reviewCallBack: function () {\r\n                    self.data = initData().data;\r\n                    self.config = initData().config;\r\n                    // 重置申请权限全局数据\r\n                    Bestone.util.resetApplyData();\r\n\r\n                    // 判断是否代为申请\r\n                    if (!!Bestone.util.query().ProxyApply) {\r\n                        self.config.isProxy = true;\r\n                        self.config.tdsLoginShow = true;\r\n                    }\r\n                    // 获取用户信息\r\n                    self.config.userInfo.user = Bestone.user.user;\r\n                    self.config.userInfo.name = Bestone.user.name;\r\n                    self.config.userInfo.branchName = Bestone.user.branchName;\r\n\r\n                    // 获取所有权限部门\r\n                    Bestone.util.ajax({\r\n                        url: 'api/PermissionManage/GetAllRoleGroup',\r\n                        data: JSON.stringify({}),\r\n                        success: function (ajaxData) {\r\n                            let selectData = [];\r\n                            $.each(ajaxData.data, function (k, v) {\r\n                                selectData.push({\r\n                                    id: v.Id,\r\n                                    name: v.RoleName\r\n                                })\r\n                            })\r\n                            self.config.selectBox.dropDownData = selectData;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            Bestone.ui.ddSetRight({\r\n                control: true,\r\n                text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\r\n                show: true,\r\n                onSuccess: function () {\r\n                    self.submitApply();\r\n                }\r\n            });\r\n\r\n            // 获取当前已选菜单数\r\n            self.config.chose = Bestone.applyData.MenuArr.length;\r\n        },\r\n        deactivated: function () {\r\n            var self = this;\r\n            // 回退时清除数据\r\n            Bestone.util.resetData(function () {\r\n                self.data = initData().data;\r\n                self.config = initData().config;\r\n                // 重置申请权限全局数据\r\n                Bestone.util.resetApplyData();\r\n            });\r\n        },\r\n        methods: {\r\n            submitApply: function () {\r\n                let self = this;\r\n                // 判断是否选择门市\r\n                if (Bestone.applyData.MenuArr.length <= 0) {\r\n                    Bestone.ui.message({\r\n                        content: '请先选择'\r\n                    });\r\n                    return;\r\n                }\r\n                Bestone.applyData.ApplyDesc = self.config.explainValue;\r\n                Bestone.util.vueJump({\r\n                    path: '/applyPermission/finalCheck'\r\n                });\r\n            },\r\n            // 获取验证码\r\n            getCodeDeal: function (accountName) {\r\n                let self = this;\r\n\r\n                Bestone.util.ajax({\r\n                    url: 'api/DingTalk/SendMessage',\r\n                    data: JSON.stringify({\r\n                        accountName: accountName,\r\n                        msgType: self.config.msgType, // 1-短信 2-语音\r\n                        businessType: 2, // 1-登陆 2-代为申请授权\r\n                    }),\r\n                    success: function (ajaxData) {\r\n                        let phone = ajaxData.data.PhoneNum;\r\n                        let omitPhone = phone.substr(0, 4) + '****' + phone.substr(phone.length - 3, phone.length);\r\n                        let typeText = '';\r\n                        if (self.config.msgType === 1) {\r\n                            typeText = '文字短信'\r\n                        } else {\r\n                            typeText = '语音口令'\r\n                        }\r\n                        self.config.tdsLoginModal.prompt = '你的手机' + omitPhone + '将会收到一条' + typeText + '，请注意查收！'\r\n                    },\r\n                    fail: function () {\r\n                        self.config.msgType = 2;\r\n                        self.config.tdsLoginModal.getCodeBtnText = '发送语音口令';\r\n                    }\r\n                });\r\n            },\r\n            // 代为提交\r\n            submitDeal: function (obj) {\r\n                let self = this;\r\n\r\n                Bestone.util.ajax({\r\n                    url: 'api/DingTalk/AuthProxy',\r\n                    data: JSON.stringify({\r\n                        accountName: obj.accountVal,\r\n                        code: obj.verifyCode,\r\n                    }),\r\n                    success: function (ajaxData) {\r\n                        ajaxData = ajaxData.data;\r\n                        self.config.tdsLoginShow = false;\r\n\r\n                        // 写入代为申请用户信息\r\n                        Bestone.applyData.ProxyApplyUserId = ajaxData.UserId;\r\n                        Bestone.applyData.ProxyApplyUserAccount = ajaxData.AccountName;\r\n                        Bestone.applyData.ProxyApplyUserName = ajaxData.UserName;\r\n                        Bestone.applyData.ProxyApplyBranchId = ajaxData.BranchId;\r\n                        Bestone.applyData.ProxyApplyBranchName = ajaxData.BranchName;\r\n                        // 获取代为用户信息\r\n                        self.config.proxyUserInfo.user = Bestone.applyData.ProxyApplyUserAccount;\r\n                        self.config.proxyUserInfo.name = Bestone.applyData.ProxyApplyUserName;\r\n                    }\r\n                });\r\n            },\r\n            // 下拉框点击\r\n            selectClick: function (item) {\r\n                let self = this;\r\n                // 重置申请权限全局数据\r\n                Bestone.applyData.RoleId = 0;\r\n                Bestone.applyData.MenuArr = [];\r\n                // 获取当前已选菜单数\r\n                self.config.chose = Bestone.applyData.MenuArr.length;\r\n                Bestone.ui.ddSetRight({\r\n                    control: true,\r\n                    text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\r\n                    show: true,\r\n                    onSuccess: function () {\r\n                        self.submitApply();\r\n                    }\r\n                });\r\n                self.config.selectChoiceId = item.id;\r\n                Bestone.applyData.RoleId = item.id;\r\n\r\n                // 获取权限部门下所有菜单\r\n                Bestone.util.ajax({\r\n                    url: 'api/AuthManage/GetRoleMenus',\r\n                    data: JSON.stringify({\r\n                        RoleId: self.config.selectChoiceId\r\n                    }),\r\n                    success: function (ajaxData) {\r\n                        self.config.searchBox.suggest.data = Bestone.util.getTreeViewDataForSearch({\r\n                            data: ajaxData.data,\r\n                            name: 'MenuName',\r\n                            id: 'MenuId',\r\n                            childKey: 'ChildList'\r\n                        });\r\n                        // 一级不展示按钮\r\n                        $.each(ajaxData.data, function (k, v) {\r\n                            v.frontNoShowBtn = ['addCustom', 'addDirect'];\r\n                        });\r\n                        self.data.treeView = ajaxData.data;\r\n                    }\r\n                });\r\n            },\r\n            // 搜索点击\r\n            searchClickDeal: function (str) {\r\n                Bestone.ui.message({\r\n                    content: '仅支持智能匹配搜索'\r\n                });\r\n            },\r\n            // 输入框值改变\r\n            searchValChangeDeal: function (str) {\r\n                this.config.searchBox.searchVal = str; // 必须，用于父子组件数据双向绑定\r\n            },\r\n            // 搜索下拉框点击\r\n            itemClickDeal: function (item) {\r\n                let val = item.id;\r\n                if (!!val) {\r\n                    let $loca = $('.ui.tree-view .loca' + val);\r\n                    $('.ui.tree-view .item').css('background-color', 'transparent');\r\n                    if ($loca.length > 0) {\r\n                        setTimeout(function () {\r\n                            $loca.css('background-color', '#FFFBE6');\r\n                            $(window).scrollTop($loca.offset().top - 5);\r\n                        }, 100);\r\n                    }\r\n                }\r\n            },\r\n            // 按所属公司添加范围\r\n            addDirectDeal: function (item) {\r\n                let self = this;\r\n                let isActived = false; // 是否已编辑\r\n                let userBranchId = 0; // 获得权限人的机构id\r\n                let userBranchName = ''; // 获得权限人的机构名称\r\n                if (!self.config.isProxy) { // 不是代为申请\r\n                    userBranchId = Bestone.user.branchId;\r\n                    userBranchName = Bestone.user.branchName;\r\n                } else { // 是代为申请\r\n                    userBranchId = Bestone.applyData.ProxyApplyBranchId;\r\n                    userBranchName = Bestone.applyData.ProxyApplyBranchName;\r\n                }\r\n                let newMenuItem = {\r\n                    MenuID: item.MenuId,\r\n                    BranchIds: item.MenuBusinessType !== '' ? [userBranchId] : [], //item.MenuBusinessType 为空字符串不可选范围\r\n                    ButtonIds: [],\r\n                    MenuName: item.MenuName,\r\n                    BranchNames: item.MenuBusinessType !== '' ? [userBranchName] : [],\r\n                    ButtonNames: [],\r\n                };\r\n                $.each(Bestone.applyData.MenuArr, function (k, v) {\r\n                    if (v.MenuID == item.MenuId) {\r\n                        Bestone.applyData.MenuArr.splice(k, 1, newMenuItem);\r\n                        isActived = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if (!isActived) { // 如果没有编辑则添加一条新的\r\n                    Bestone.applyData.MenuArr.push(newMenuItem);\r\n                }\r\n                // 获取当前已选菜单数\r\n                self.config.chose = Bestone.applyData.MenuArr.length;\r\n                Bestone.ui.ddSetRight({\r\n                    control: true,\r\n                    text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\r\n                    show: true,\r\n                    onSuccess: function () {\r\n                        self.submitApply();\r\n                    }\r\n                });\r\n                Bestone.ui.message({\r\n                    content: '添加成功'\r\n                });\r\n            },\r\n            // 自定义选择权限管理范围\r\n            addCustomDeal: function (item) {\r\n                let self = this;\r\n                // item.MenuBusinessType  17,4,21-门市可选   ''-不可选范围\r\n                if (item.MenuBusinessType !== '') { // 可选范围\r\n                    Bestone.util.vueJump({\r\n                        path: '/applyPermission/mgmtLimit',\r\n                        query: {\r\n                            MenuId: item.MenuId,\r\n                            MenuName: item.MenuName,\r\n                            MenuBusinessType: item.MenuBusinessType\r\n                        }\r\n                    });\r\n                } else { // 不可选范围\r\n                    let isActived = false; // 是否已编辑\r\n                    let newMenuItem = {\r\n                        MenuID: item.MenuId,\r\n                        BranchIds: [],\r\n                        ButtonIds: [],\r\n                        MenuName: item.MenuName,\r\n                        BranchNames: [],\r\n                        ButtonNames: [],\r\n                    };\r\n                    $.each(Bestone.applyData.MenuArr, function (k, v) {\r\n                        if (v.MenuID == item.MenuId) {\r\n                            Bestone.applyData.MenuArr.splice(k, 1, newMenuItem);\r\n                            isActived = true;\r\n                            return false;\r\n                        }\r\n                    });\r\n                    if (!isActived) { // 如果没有编辑则添加一条新的\r\n                        Bestone.applyData.MenuArr.push(newMenuItem);\r\n                    }\r\n                    // 获取当前已选菜单数\r\n                    self.config.chose = Bestone.applyData.MenuArr.length;\r\n                    Bestone.ui.ddSetRight({\r\n                        control: true,\r\n                        text: '下一步(' + Bestone.applyData.MenuArr.length + ')',\r\n                        show: true,\r\n                        onSuccess: function () {\r\n                            self.submitApply();\r\n                        }\r\n                    });\r\n                    Bestone.ui.message({\r\n                        content: '添加成功'\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    #apply-permission {\r\n        padding-top: 10px;\r\n        padding-bottom: 10px;\r\n        font-size: 14px;\r\n        color: #404040;\r\n        & > .choice-permission {\r\n            margin-top: 10px;\r\n            & > .choice-department {\r\n                padding: 10px 15px;\r\n                background-color: #fff;\r\n            }\r\n        }\r\n        & > .search-content {\r\n            background-color: #fff;\r\n            padding: 10px 15px;\r\n        }\r\n        & > .explain-content {\r\n            padding: 0px 15px;\r\n        }\r\n        & > .tree-view-content {\r\n            margin-top: 10px;\r\n            margin-bottom: 10px;\r\n        }\r\n        & > .explain {\r\n            padding: 10px 15px;\r\n            background-color: #fff;\r\n            margin-top: 10px;\r\n            & > .ui.ui-textarea {\r\n                & > textarea {\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// applyPermission.vue?34aeaf42"],"sourceRoot":""}