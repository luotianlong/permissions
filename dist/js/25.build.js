webpackJsonp([25],{146:function(e,t,n){t=e.exports=n(0)(void 0),t.push([e.i,"#apply-record-detail[data-v-ecd0700c]{padding-top:10px;padding-bottom:10px}#apply-record-detail>.ui.ui-title[data-v-ecd0700c]{margin-top:10px}#apply-record-detail>.apply-list[data-v-ecd0700c]{background-color:#fff;padding:10px 15px}#apply-record-detail>.apply-list>.ui.ui-table .del-btn[data-v-ecd0700c]{color:#ff4c4c}#apply-record-detail>.instruction-content[data-v-ecd0700c]{padding:10px 15px;color:#666;line-height:18px;background-color:#fff;margin-bottom:10px}",""])},179:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"apply-record-detail"}},[n("div",{staticClass:"ui ui-text-list"},[e.config.proxyUserInfo.name?e._e():[n("p",[e._v("申请账号："+e._s(e.config.userInfo.user))]),e._v(" "),n("p",[e._v("姓名："+e._s(e.config.userInfo.name))])],e._v(" "),e.config.proxyUserInfo.name?[n("p",[e._v("申请账号："+e._s(e.config.proxyUserInfo.user))]),e._v(" "),n("p",[e._v("申请人："+e._s(e.config.proxyUserInfo.name))])]:e._e()],2),e._v(" "),n("div",{staticClass:"ui ui-title"},[e._v("申请权限列表")]),e._v(" "),n("div",{staticClass:"apply-list"},[n("div",{staticClass:"ui ui-table"},[n("table",[n("col",{attrs:{width:"28.333%"}}),e._v(" "),n("col",{attrs:{width:"28.333%"}}),e._v(" "),n("col",{attrs:{width:"28.333%"}}),e._v(" "),n("col",{attrs:{width:"15%"}}),e._v(" "),e._m(0),e._v(" "),n("tbody",e._l(e.config.menuArr,function(t,o){return n("tr",[n("td",[e._v(e._s(t.MenuName))]),e._v(" "),t.BranchIds.length>1?n("td",[n("v-touch",{attrs:{tag:"p"},on:{tap:function(n){n.preventDefault(),e.viewControlLimit(t)},pressup:function(n){n.preventDefault(),e.viewControlLimit(t)}}},[e._v(e._s(t.BranchNames[0])+"等"),n("i",{staticClass:"iconfont icon-gengduo"})])],1):e._e(),e._v(" "),t.BranchIds.length<=1?n("td",[e._v(e._s(t.BranchNames[0]||"全部"))]):e._e(),e._v(" "),n("td",[e._v(e._s(e.renderButtonNames(t.ButtonNames)))]),e._v(" "),n("td",[n("v-touch",{staticClass:"del-btn",attrs:{tag:"p"},on:{tap:function(n){n.preventDefault(),e.deleteMenu(t,o)},pressup:function(n){n.preventDefault(),e.deleteMenu(t,o)}}},[e._v("删除")])],1)])}))])])]),e._v(" "),n("div",{staticClass:"ui ui-title"},[e._v("申请权限说明")]),e._v(" "),n("div",{staticClass:"instruction-content"},[e._v(e._s(e.config.explainValue))]),e._v(" "),e._e(),e._v(" "),n("modal-box",{attrs:{setConfig:e.config.modalBox},on:{confirmClick:e.confirmClickDeal,cancelClick:e.cancelClickDeal}})],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("申请权限名称")]),e._v(" "),n("th",[e._v("管理范围")]),e._v(" "),n("th",[e._v("导出权限")]),e._v(" "),n("th",[e._v("操作")])])])}]}},210:function(e,t,n){var o=n(146);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("b8c4481e",o,!0)},62:function(e,t,n){function o(e){n(210)}var a=n(1)(n(93),n(179),o,"data-v-ecd0700c",null);e.exports=a.exports},93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return{data:{},config:{menuArr:[],userInfo:{user:"",name:"",branchName:""},proxyUserInfo:{user:"",name:""},explainValue:"",modalBox:{isShow:!1,content:"",btn:[{text:"确定",handel:"confirmClick"},{text:"取消",handel:"cancelClick"}]}}}};t.default={data:function(){return new o},mounted:function(){},activated:function(){var e=this;Bestone.ui.pageInit({setTitle:"申请权限",reviewCallBack:function(){if(0===Bestone.applyData.RoleId)return Bestone.ui.message({content:"数据已失效，请重新申请",notOper:!0}),void setTimeout(function(){window.app.$router.go(-1)},1e3);e.config.menuArr=Bestone.applyData.MenuArr,e.config.userInfo.user=Bestone.user.user,e.config.userInfo.name=Bestone.user.name,e.config.proxyUserInfo.user=Bestone.applyData.ProxyApplyUserAccount,e.config.proxyUserInfo.name=Bestone.applyData.ProxyApplyUserName,e.config.explainValue=Bestone.applyData.ApplyDesc||"无"}}),Bestone.ui.ddSetRight({control:!0,text:"提交",show:!0,onSuccess:function(){e.submit()}})},deactivated:function(){var e=this;Bestone.util.resetData(function(){e.data=o().data,e.config=o().config})},methods:{viewControlLimit:function(e){var t=[];$.each(e.BranchNames,function(e,n){t.push({name:n})}),Bestone.mgmtLimitData=t,Bestone.util.vueJump({path:"/applyRecord/controlLimit"})},renderButtonNames:function(e){return e.length<=0?"无":1===e.length?e[0]:e[0]+"等"},deleteMenu:function(e,t){Bestone.applyData.MenuArr.splice(t,1)},submit:function(){var e=this;if(Bestone.applyData.MenuArr&&Bestone.applyData.MenuArr.length<=0)return void Bestone.ui.message({content:"申请权限不能为空"});e.config.modalBox.content='<p style="font-size: 14px;text-align: center;padding: 20px 0px;line-height: 16px;">确定提交？</p>',e.config.modalBox.isShow=!0},confirmClickDeal:function(){var e=this;Bestone.util.ajax({url:"api/PermissionManage/RoleApply",data:JSON.stringify({RoleID:Bestone.applyData.RoleId,ApplyUserID:Bestone.user.id,ProxyApplyUserId:Bestone.applyData.ProxyApplyUserId,ApplyDesc:Bestone.applyData.ApplyDesc,Menus:Bestone.applyData.MenuArr}),success:function(t){Bestone.ui.message({content:"提交成功",notOper:!0}),e.config.modalBox.isShow=!1,setTimeout(function(){window.app.$router.go(-2)},500)}})},cancelClickDeal:function(){this.config.modalBox.isShow=!1}}}}});