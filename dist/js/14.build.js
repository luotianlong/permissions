webpackJsonp([14],{105:function(e,a,t){"use strict";function i(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){return{data:{titleName:"",pageOne:{treeView:[]},pageTwo:{treeView:[]}},config:{showFunctionMenu:!1,tabIndex:0,tabShow:!1,pageOne:{searchBox:{searchVal:"",placeholder:"公司名称",suggest:{isShow:1,data:[]}},treeView:{isShow:1,isShowIcon:1,keyConfig:{name:"Branch_Name",id:"Branch_ID",childKey:"ChildList"},btn:[{iconFontClass:"icon-manager",color:"#E5B626",handle:"treeMgmt"}],locationConfig:{key:"id"}}},pageTwo:{pageIndex:1,pageSize:20,isLoadAll:!1,isSendAjax:!1,searchAjaxVal:"",searchBox:{searchVal:"",placeholder:"门市名称"},treeView:{isShow:1,isShowIcon:2,keyConfig:{name:"Branch_Name",id:"Branch_ID",childKey:"ChildList"},btn:[{iconFontClass:"icon-manager",color:"#E5B626",handle:"treeMgmt"}],locationConfig:{key:"id"}}}}}};a.default={data:function(){return new n},activated:function(){var e=this;Bestone.ui.pageInit({setTitle:"管理范围选择",reviewCallBack:function(){function a(){e.config.pageTwo.isSendAjax=!0,Bestone.util.ajax({url:"api/UserManage/GetStoreBranchList",showLoad:!1,data:JSON.stringify({PageIndex:e.config.pageTwo.pageIndex,PageSize:e.config.pageTwo.pageSize,Keyword:e.config.pageTwo.searchAjaxVal}),success:function(a){a.data.list.length<e.config.pageTwo.pageSize&&(e.config.pageTwo.isLoadAll=!0),e.data.pageTwo.treeView=a.data.list||[],Bestone.ui.hideLoadingFrame(),e.data.pageOne.treeView.length>0?(e.config.tabIndex=1,e.data.pageTwo.treeView.length>0&&(e.config.tabShow=!0)):(e.config.showFunctionMenu=!0,Bestone.util.vueJump({path:"/permissionControl/permissionMgmt",query:{MenuName:Bestone.util.query().MenuName,MenuCode:Bestone.util.query().MenuCode}}))},complete:function(){e.config.pageTwo.isSendAjax=!1}})}e.data.titleName=Bestone.util.query().MenuName,Bestone.ui.loadingFrame(),Bestone.util.ajax({url:"api/UserManage/GetCompanyBranchList",showLoad:!1,data:JSON.stringify({}),success:function(t){e.config.pageOne.searchBox.suggest.data=Bestone.util.getTreeViewDataForSearch({data:t.data||[],name:"Branch_Name",id:"Branch_ID",childKey:"ChildList"}),e.data.pageOne.treeView=t.data||[],a()}})}}),Bestone.util.scrollRefresh({callback:function(a){2!==e.config.tabIndex||e.config.pageTwo.isSendAjax||e.config.pageTwo.isLoadAll||(e.config.pageTwo.isSendAjax=!0,Bestone.util.ajax({url:"api/UserManage/GetStoreBranchList",showLoad:!1,data:JSON.stringify({PageIndex:e.config.pageTwo.pageIndex+1,PageSize:e.config.pageTwo.pageSize,Keyword:e.config.pageTwo.searchAjaxVal}),success:function(a){var t;a.data.list.length<e.config.pageTwo.pageSize&&(e.config.pageTwo.isLoadAll=!0),e.config.pageTwo.pageIndex=a.data.page,(t=e.data.pageTwo.treeView).push.apply(t,i(a.data.list))},complete:function(){e.config.pageTwo.isSendAjax=!1}}))}})},deactivated:function(){var e=this;Bestone.util.resetData(function(){e.data=n().data,e.config=n().config})},methods:{switchTab:function(e){this.config.tabIndex=e},clickFunctionMenu:function(){Bestone.util.vueJump({path:"/permissionControl/permissionMgmt",query:{MenuName:Bestone.util.query().MenuName,MenuCode:Bestone.util.query().MenuCode}})},pageOneClickDeal:function(e){console.log(e)},pageOneValChangeDeal:function(e){this.config.pageOne.searchBox.searchVal=e},pageOneItemClickDeal:function(e){var a=e.id;if(a){var t=$(".page-one .ui.tree-view .loca"+a);$(".page-one .ui.tree-view .item").css("background-color","transparent"),t.length>0&&setTimeout(function(){t.css("background-color","#FFFBE6"),$(window).scrollTop(t.offset().top-5)},100)}},pageOneTreeDataChangeDeal:function(e){this.data.pageOne.treeView=e,console.log(e)},pageOneTreeMgmt:function(e){Bestone.util.vueJump({path:"/permissionControl/permissionMgmt",query:{MenuName:Bestone.util.query().MenuName,MenuCode:Bestone.util.query().MenuCode,Branch_ID:e.Branch_ID,Branch_Name:e.Branch_Name}})},pageTwoClickDeal:function(e){var a=this;a.config.pageTwo.isSendAjax=!0,Bestone.util.ajax({url:"api/UserManage/GetStoreBranchList",data:JSON.stringify({PageIndex:1,PageSize:a.config.pageTwo.pageSize,Keyword:e}),success:function(t){a.config.pageTwo.searchAjaxVal=e,a.config.pageTwo.pageIndex=1,t.data.list.length<a.config.pageTwo.pageSize?a.config.pageTwo.isLoadAll=!0:a.config.pageTwo.isLoadAll=!1,a.data.pageTwo.treeView=t.data.list||[]},complete:function(){a.config.pageTwo.isSendAjax=!1}})},pageTwoValChangeDeal:function(e){this.config.pageTwo.searchBox.searchVal=e},pageTwoTreeDataChangeDeal:function(e){this.data.pageTwo.treeView=e},pageTwoTreeMgmt:function(e){Bestone.util.vueJump({path:"/permissionControl/permissionMgmt",query:{MenuName:Bestone.util.query().MenuName,MenuCode:Bestone.util.query().MenuCode,Branch_ID:e.Branch_ID,Branch_Name:e.Branch_Name}})}}}},129:function(e,a,t){a=e.exports=t(0)(void 0),a.push([e.i,'#permission-limit[data-v-258cfa45]{padding-top:10px}#permission-limit>.tab[data-v-258cfa45]{background-color:#fff;height:40px;overflow:hidden;border-bottom:1px solid #eee;margin-bottom:10px}#permission-limit>.tab>.item[data-v-258cfa45]{position:relative;width:50%;height:40px;float:left;line-height:40px;font-size:14px;color:#666;text-align:center;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#permission-limit>.tab>.item[data-v-258cfa45]:after{content:"";position:absolute;width:1px;height:26px;background-color:#eee;top:7px;right:0}#permission-limit>.tab>.item.action[data-v-258cfa45]{color:#38adff}#permission-limit>.tab>.item.action[data-v-258cfa45]:before{content:"";position:absolute;width:99%;height:1px;background-color:#38adff;top:0;left:0}#permission-limit>.tab>.item[data-v-258cfa45]:last-child{float:right}#permission-limit>.tab>.item[data-v-258cfa45]:last-child:after{width:0}#permission-limit>.tab>.item:last-child.action[data-v-258cfa45]:before{right:0;left:auto}#permission-limit .page-two>.search[data-v-258cfa45],#permission-limit>.page-one>.search[data-v-258cfa45]{background-color:#fff;padding:10px 15px}#permission-limit .page-two>.tree-view-content[data-v-258cfa45],#permission-limit>.page-one>.tree-view-content[data-v-258cfa45]{margin-top:10px}#permission-limit .page-two>.tree-view-content>.no-data[data-v-258cfa45],#permission-limit>.page-one>.tree-view-content>.no-data[data-v-258cfa45]{color:#999;font-size:12px;line-height:20px;text-align:center;margin-top:50px;padding:0 20px}#permission-limit>.page-one[data-v-258cfa45]{padding-bottom:10px}#permission-limit>.function-menu[data-v-258cfa45]{margin-top:60px;text-align:center}#permission-limit>.function-menu>p[data-v-258cfa45]{padding:30px 15px;line-height:18px;font-size:14px;color:#999;text-align:center}#permission-limit>.function-menu>a[data-v-258cfa45]{margin-top:20px}',""])},162:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{attrs:{id:"permission-limit"}},[t("div",{staticClass:"ui ui-title"},[e._v("菜单权限："+e._s(e.data.titleName))]),e._v(" "),e.config.tabShow?t("div",{staticClass:"tab"},[t("v-touch",{staticClass:"item",class:1===e.config.tabIndex?"action":"",attrs:{tag:"div"},on:{tap:function(a){a.preventDefault(),e.switchTab(1)},pressup:function(a){a.preventDefault(),e.switchTab(1)}}},[e._v("按公司")]),e._v(" "),t("v-touch",{staticClass:"item",class:2===e.config.tabIndex?"action":"",attrs:{tag:"div"},on:{tap:function(a){a.preventDefault(),e.switchTab(2)},pressup:function(a){a.preventDefault(),e.switchTab(2)}}},[e._v("按门市")])],1):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.config.tabIndex,expression:"config.tabIndex===1"}],staticClass:"page-one"},[t("div",{staticClass:"search"},[t("search-box",{attrs:{searchVal:e.config.pageOne.searchBox.searchVal,placeholder:e.config.pageOne.searchBox.placeholder,suggest:e.config.pageOne.searchBox.suggest},on:{searchClick:e.pageOneClickDeal,searchValChange:e.pageOneValChangeDeal,itemClick:e.pageOneItemClickDeal}})],1),e._v(" "),t("div",{staticClass:"tree-view-content"},[0==e.data.pageOne.treeView.length?t("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e(),e._v(" "),t("tree-view",{attrs:{dataArr:e.data.pageOne.treeView,setConfig:e.config.pageOne.treeView},on:{dataArrChange:e.pageOneTreeDataChangeDeal,treeMgmt:e.pageOneTreeMgmt}})],1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.config.tabIndex,expression:"config.tabIndex===2"}],staticClass:"page-two"},[t("div",{staticClass:"search"},[t("search-box",{attrs:{searchVal:e.config.pageTwo.searchBox.searchVal,placeholder:e.config.pageTwo.searchBox.placeholder},on:{searchClick:e.pageTwoClickDeal,searchValChange:e.pageTwoValChangeDeal}})],1),e._v(" "),t("div",{staticClass:"tree-view-content"},[0==e.data.pageTwo.treeView.length?t("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e(),e._v(" "),t("tree-view",{attrs:{dataArr:e.data.pageTwo.treeView,setConfig:e.config.pageTwo.treeView},on:{dataArrChange:e.pageTwoTreeDataChangeDeal,treeMgmt:e.pageTwoTreeMgmt}}),e._v(" "),e.data.pageTwo.treeView.length>0?t("div",{staticClass:"ui ui-scrollRefresh"},[e.config.pageTwo.isLoadAll?e._e():[t("i",{staticClass:"iconfont icon-load"}),t("span",[e._v("加载中")])],e._v(" "),e.config.pageTwo.isLoadAll?[t("span",[e._v("没有更多了")])]:e._e()],2):e._e()],1)]),e._v(" "),e.config.showFunctionMenu?t("div",{staticClass:"function-menu"},[t("p",[e._v("该菜单为功能菜单，无需选择范围")]),e._v(" "),t("v-touch",{staticClass:"ui ui-button",attrs:{tag:"a"},on:{pressup:function(a){a.preventDefault(),e.clickFunctionMenu(a)},tap:function(a){a.preventDefault(),e.clickFunctionMenu(a)}}},[e._v("继续")])],1):e._e()])])},staticRenderFns:[]}},193:function(e,a,t){var i=t(129);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(2)("82a179ce",i,!0)},74:function(e,a,t){function i(e){t(193)}var n=t(1)(t(105),t(162),i,"data-v-258cfa45",null);e.exports=n.exports}});